"use strict";(self.webpackChunkmybricks=self.webpackChunkmybricks||[]).push([[635],{79042:(e,t,n)=>{n.d(t,{$T:()=>A,Cd:()=>b,Ee:()=>T,Eh:()=>N,FM:()=>S,Hf:()=>O,Io:()=>j,N0:()=>y,Pj:()=>C,UL:()=>x,Ux:()=>k,Vp:()=>P,XF:()=>R,ZA:()=>g,__:()=>w,bn:()=>F,hv:()=>K,jy:()=>L,mh:()=>h,u4:()=>$,vv:()=>E,wN:()=>M,x1:()=>I,xv:()=>D,y$:()=>_});var o=n(90359),r=n.n(o),a=n(25899),i=n.n(a),s=n(10704),u=n.n(s),c=n(50254),d=n(22514),l=n(83446);const f={x:100,y:100},p=50,v={w:800,h:500},m=e=>{const t=r().useRef(),n=r().useRef(),a=r().useRef(),s=e.children.filter((e=>"Layer"===e.type)),u=e.children.filter((e=>"Layer"!==e.type)),c=function(e){const t=r().useRef();return(0,o.useLayoutEffect)((()=>{t.current=e})),t.current}(e),[m,h]=(0,o.useState)(v),[y,g]=(0,o.useState)(!1),w=t=>{const{forwardedRef:n}=e;n&&("function"==typeof n?n(t):n.current=t)};return(0,o.useEffect)((()=>{const e=n.current.content;e.removeAttribute("class"),e.removeAttribute("role")}),[]),(0,o.useLayoutEffect)((()=>{const o=t.current,r=o.parentNode,u=r.offsetWidth,c=r.offsetHeight;let d=f.x,l=f.y;function v(t,n){o.childNodes[0].style.transform=`translate(${t}px,${n}px)`,"function"==typeof e.onScroll&&e.onScroll({left:d+p,top:l+p})}function y(){d=f.x,l=f.y,v(d,l)}return h({w:u,h:c}),n.current=new(i().Stage)({width:m.w,height:m.h,container:t.current}),w(n.current),a.current=$.createContainer(n.current),$.updateContainer(s,a.current),y(),n.current.position({x:p,y:p}),"function"==typeof e.onLoad&&e.onLoad({goHome:y}),r.addEventListener("keydown",(e=>{" "===e.key&&(g(!0),e.preventDefault())})),r.addEventListener("keyup",(e=>{" "===e.key&&(g(!1),e.preventDefault())})),r.addEventListener("wheel",(e=>{const{deltaX:t,deltaY:n}=e;d-=t,l-=n,v(d,l)})),()=>{i().isBrowser&&(w(null),$.updateContainer(null,a.current,null),n.current.destroy())}}),[]),(0,o.useLayoutEffect)((()=>{const n=t.current,o=n.parentNode;const r=t=>{y&&(0,l.qw)(t,(({po:{x:t,y:o},epo:{ex:r,ey:a},dpo:{dx:i,dy:s}},u)=>{"moving"==u&&(f.x+=i,f.y+=s,function(t,o){n.childNodes[0].style.transform=`translate(${t}px,${o}px)`,"function"==typeof e.onScroll&&e.onScroll({left:t+p,top:o+p})}(f.x,f.y))}))};return o.addEventListener("mousedown",r),()=>{o.removeEventListener("mousedown",r)}}),[y]),(0,o.useLayoutEffect)((()=>{n.current.on("mousedown",(function(e){const t=e.target;function n(e,t){var o;return(null===(o=null==e?void 0:e.attrs)||void 0===o?void 0:o[t])?e:e.parent?n(e.parent,t):void 0}if(t){const o=n(t,"_onMouseDown");if(o){const t=o.attrs._onMouseDown;"function"==typeof t&&(e.currentTarget=o,t(e))}}if(t){const o=n(t,"_onMouseMove");if(o){const t=o.attrs._onMouseMove;"function"==typeof t&&(e.currentTarget=o,t(e))}}}))}),[]),r().useLayoutEffect((()=>{w(n.current);const o=t.current.parentNode.parentNode;"function"==typeof e.shellRef&&e.shellRef(o),(0,d.DO)(n.current,e,c),$.updateContainer(s,a.current,null)})),r().createElement("div",{style:{flex:1,position:"relative",overflow:"hidden"},tabIndex:-1},r().createElement("div",{ref:t,accessKey:e.accessKey,className:e.className,style:e.style,tabIndex:e.tabIndex,title:e.title}),u,y?r().createElement("div",{style:{position:"absolute",left:0,top:0,right:0,bottom:0,zIndex:100,cursor:"grab"}}):null)},h="Layer",y="FastLayer",g="Group",w="Label",x="Rect",b="Circle",C="Ellipse",E="Wedge",I="Line",L="Sprite",T="Image",D="Text",R="TextPath",k="Star",S="Ring",M="Arc",P="Tag",_="Path",K="RegularPolygon",N="Arrow",F="Shape",A="Transformer",$=u()(c),O=r().forwardRef(((e,t)=>r().createElement(m,Object.assign(Object.assign({},e),{forwardedRef:t})))),j=d.x5},50254:(e,t,n)=>{n.r(t),n.d(t,{appendChild:()=>k,appendChildToContainer:()=>S,appendInitialChild:()=>c,cancelTimeout:()=>E,clearContainer:()=>U,commitMount:()=>F,commitTextUpdate:()=>N,commitUpdate:()=>A,createInstance:()=>d,createTextInstance:()=>l,detachDeletedInstance:()=>W,finalizeInitialChildren:()=>f,getChildHostContext:()=>b,getPublicInstance:()=>p,getRootHostContext:()=>x,hideInstance:()=>$,hideTextInstance:()=>O,idlePriority:()=>i.unstable_IdlePriority,insertBefore:()=>M,insertInContainerBefore:()=>P,isPrimaryRenderer:()=>T,noTimeout:()=>I,now:()=>i.unstable_now,prepareForCommit:()=>v,preparePortalMount:()=>m,prepareUpdate:()=>h,removeChild:()=>_,removeChildFromContainer:()=>K,resetAfterCommit:()=>y,resetTextContent:()=>g,run:()=>i.unstable_runWithPriority,scheduleTimeout:()=>C,shouldDeprioritizeSubtree:()=>w,shouldSetTextContent:()=>L,supportsMutation:()=>R,unhideInstance:()=>j,unhideTextInstance:()=>q,warnsIfNotActing:()=>D});var o=n(92239),r=n.n(o),a=n(22514),i=n(72627);const s={},u={};function c(e,t){"string"!=typeof t?(e.add(t),(0,a.wq)(e)):console.error(`Do not use plain text as child of Konva.Node. You are using text: ${t}`)}function d(e,t,n){let o=r()[e];o||(console.error(`Konva has no node with the type ${e}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${e}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),o=r().Group);const i={},s={};for(var u in t){"on"===u.slice(0,2)?s[u]=t[u]:i[u]=t[u]}const c=new o(i);if((0,a.DO)(c,s),"Image"===e){const e=t.src,n=t.maxWidth;if(!c.image()){const t=new window.Image;t.onload=function(e){if(n){const e=n/this.width;c.scale({x:e,y:e})}c.image(t)},t.src=e,c.image(new window.Image)}}return c}function l(e,t,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${e}"`)}function f(e,t,n){return!1}function p(e){return e}function v(){return null}function m(){return null}function h(e,t,n,o){return u}function y(){}function g(e){}function w(e,t){return!1}function x(){return s}function b(){return s}r().Node.prototype._applyProps=a.DO;const C=setTimeout,E=clearTimeout,I=-1;function L(e,t){return!1}const T=!1,D=!0,R=!0;function k(e,t){t.parent===e?t.moveToTop():e.add(t),(0,a.wq)(e)}function S(e,t){t.parent===e?t.moveToTop():e.add(t),(0,a.wq)(e)}function M(e,t,n){t._remove(),e.add(t),t.setZIndex(n.getZIndex()),(0,a.wq)(e)}function P(e,t,n){M(e,t,n)}function _(e,t){t.destroy(),t.off(a.WF),(0,a.wq)(e)}function K(e,t){t.destroy(),t.off(a.WF),(0,a.wq)(e)}function N(e,t,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function F(e,t,n){}function A(e,t,n,o,r){(0,a.DO)(e,r,o)}function $(e){e.hide(),(0,a.wq)(e)}function O(e){}function j(e,t){(null==t.visible||t.visible)&&e.show()}function q(e,t){}function U(e){}function W(){}},40635:(e,t,n)=>{n.r(t),n.d(t,{Arc:()=>a.wN,Arrow:()=>a.Eh,Circle:()=>a.Cd,Ellipse:()=>a.Pj,FastLayer:()=>a.N0,Group:()=>a.ZA,Image:()=>a.Ee,Konva:()=>r.a,KonvaRenderer:()=>a.u4,Label:()=>a.__,Layer:()=>a.mh,Line:()=>a.x1,Path:()=>a.y$,Rect:()=>a.UL,RegularPolygon:()=>a.hv,Ring:()=>a.FM,Shape:()=>a.bn,Sprite:()=>a.jy,Stage:()=>a.Hf,Star:()=>a.Ux,Tag:()=>a.Vp,Text:()=>a.xv,TextPath:()=>a.XF,Transformer:()=>a.$T,Wedge:()=>a.vv,useImage:()=>i.d,useStrictMode:()=>a.Io});var o=n(92239),r=n.n(o),a=n(79042),i=n(65420);delete window.Konva},22514:(e,t,n)=>{n.d(t,{DO:()=>p,WF:()=>s,wq:()=>v,x5:()=>c});var o=n(82698);const r={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let a=!1,i=!1;const s=".react-konva-event";let u=!1;function c(e){u=e}const d="ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.\nPosition of a node will be changed during drag&drop, so you should update state of the react app as well.\nConsider to add onDragMove or onDragEnd events.\nFor more info see: https://github.com/konvajs/react-konva/issues/256\n",l='ReactKonva: You are using "zIndex" attribute for a Konva node.\nreact-konva may get confused with ordering. Just define correct order of elements in your render function of a component.\nFor more info see: https://github.com/konvajs/react-konva/issues/194\n',f={};function p(e,t,n=f){if(!a&&"zIndex"in t&&(console.warn(l),a=!0),!i&&t.draggable){var o=void 0!==t.x||void 0!==t.y,c=t.onDragEnd||t.onDragMove;o&&!c&&(console.warn(d),i=!0)}for(var p in n)if(!r[p]){var m="on"===p.slice(0,2),h=n[p]!==t[p];if(m&&h)"content"===(C=p.substr(2).toLowerCase()).substr(0,7)&&(C="content"+C.substr(7,1).toUpperCase()+C.substr(8)),e.off(C,n[p]);!t.hasOwnProperty(p)&&e.setAttr(p,void 0)}var y=u||t._useStrictMode,g={},w=!1;const x={};for(var p in t)if(!r[p]){m="on"===p.slice(0,2);var b=n[p]!==t[p];if(m&&b)"content"===(C=p.substr(2).toLowerCase()).substr(0,7)&&(C="content"+C.substr(7,1).toUpperCase()+C.substr(8)),t[p]&&(x[C]=t[p]);!m&&(t[p]!==n[p]||y&&t[p]!==e.getAttr(p))&&(w=!0,g[p]=t[p])}for(var C in w&&(e.setAttrs(g),v(e)),x)e.on(C+s,x[C])}function v(e){if(!o.Konva.autoDrawEnabled){var t=e.getLayer()||e.getStage();t&&t.batchDraw()}}},65420:(e,t,n)=>{n.d(t,{d:()=>a});var o=n(90359);const r={image:void 0,status:"loading"};function a(e,t){const[{image:n,status:a},i]=(0,o.useState)(r);return(0,o.useEffect)((()=>{if(!e)return;const n=document.createElement("img");function o(){i({image:n,status:"loaded"})}function a(){i({image:void 0,status:"failed"})}return n.addEventListener("load",o),n.addEventListener("error",a),t&&(n.crossOrigin=t),n.src=e,function(){n.removeEventListener("load",o),n.removeEventListener("error",a),i(r)}}),[e,t]),[n,a]}}}]);