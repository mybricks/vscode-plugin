"use strict";(self.webpackChunkmybricks=self.webpackChunkmybricks||[]).push([[278],{96422:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(37009),s=n.n(o),r=n(48814),i=n.n(r)()(s());i.push([e.id,".debugger-d141c {\n  width: 100%;\n  height: 100%;\n  background-color: #1b1b1b73;\n}\n.debugger-d141c .titlebar-f13f4 {\n  font-size: 12px;\n  line-height: 23px;\n  position: absolute;\n  top: 10%;\n  height: 23px;\n  padding: 0px 10px;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  align-items: center;\n  background-color: #faf8df;\n}\n.debugger-d141c .titlebar-f13f4 .resume-e51fa {\n  display: flex;\n  padding-left: 4px;\n  cursor: pointer;\n}\n.debugger-d141c .titlebar-f13f4 .resume-e51fa svg path {\n  fill: #FA6400;\n}\n",""]),i.locals={debugger:"debugger-d141c",titlebar:"titlebar-f13f4",resume:"resume-e51fa"};const c=i},62495:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(37009),s=n.n(o),r=n(48814),i=n.n(r)()(s());i.push([e.id,".error-eac54 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n  white-space: pre-wrap;\n}\n",""]),i.locals={error:"error-eac54"};const c=i},20723:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(37009),s=n.n(o),r=n(48814),i=n.n(r)()(s());i.push([e.id,"@keyframes slipInto-ee1b4 {\n  0% {\n    transform: translateX(100%);\n    opacity: 0;\n  }\n  100% {\n    transform: translateX(0);\n    opacity: 1;\n  }\n}\n.main-c2c66 {\n  animation: slipInto-ee1b4 0.1s ease-in-out 1;\n}\n",""]),i.locals={main:"main-c2c66",slipInto:"slipInto-ee1b4"};const c=i},9508:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(37009),s=n.n(o),r=n(48814),i=n.n(r)()(s());i.push([e.id,".container-aefdf {\n  position: fixed;\n  right: 20px;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  z-index: 9999;\n}\n.container-aefdf .itemWrap-cf916 {\n  position: relative;\n}\n.container-aefdf .item-a50a1 {\n  padding: 16px;\n  background-color: #fff;\n  margin-bottom: 8px;\n  border-radius: 4px;\n  max-width: 50vw;\n  max-height: 50vh;\n  overflow: auto;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  box-shadow: 0 3px 6px -4px rgba(0, 0, 0, 0.12), 0 6px 16px 0 rgba(0, 0, 0, 0.08), 0 9px 28px 8px rgba(0, 0, 0, 0.05);\n  font-size: 12px;\n}\n.container-aefdf .errorItem-c0af1 {\n  color: #f5222d;\n}\n.container-aefdf .closeIcon-e4a30 {\n  position: absolute;\n  right: 16px;\n  top: 16px;\n  width: 24px;\n  height: 24px;\n  padding: 2px;\n  cursor: pointer;\n}\n.container-aefdf .closeIcon-e4a30:hover {\n  border-radius: 4px;\n  background-color: rgba(0, 0, 0, 0.12);\n}\n",""]),i.locals={container:"container-aefdf",itemWrap:"itemWrap-cf916",item:"item-a50a1",errorItem:"errorItem-c0af1",closeIcon:"closeIcon-e4a30"};const c=i},37168:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(37009),s=n.n(o),r=n(48814),i=n.n(r)()(s());i.push([e.id,"/**\n * MyBricks Opensource\n * https://mybricks.world\n * This source code is licensed under the MIT license.\n *\n * CheMingjun @2019\n * mybricks@126.com\n */\n.slot-ec09e {\n  width: 100%;\n  height: 100% !important;\n  position: relative;\n}\n.lyFlexColumn-e62bf {\n  display: flex;\n  flex-direction: column;\n}\n.lyFlexRow-bc7e7 {\n  display: flex;\n  flex-direction: row;\n}\n.justifyContentFlexStart-c566f {\n  justify-content: flex-start;\n}\n.justifyContentFlexCenter-f2551 {\n  justify-content: center;\n}\n.justifyContentFlexFlexEnd-f18af {\n  justify-content: flex-end;\n}\n.justifyContentFlexSpaceAround-dd0f6 {\n  justify-content: space-around;\n}\n.justifyContentFlexSpaceBetween-c1027 {\n  justify-content: space-between;\n}\n.alignItemsFlexStart-fb8e7 {\n  align-items: flex-start;\n}\n.alignItemsFlexCenter-ad15a {\n  align-items: center;\n}\n.alignItemsFlexFlexEnd-ded5b {\n  align-items: flex-end;\n}\n.debugFocus-c5006 {\n  outline: 1px dashed red;\n  outline-offset: -3px;\n}\n.com-e0c1f {\n  flex-shrink: 0;\n}\n.flex-ecc94 {\n  flex: 1;\n  min-height: 0;\n  position: relative;\n}\n.flex-ecc94 > div {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n}\n.flex-ecc94 > * {\n  height: 100%;\n}\n.error-a9a37 {\n  font-size: 12px;\n  color: #f5222d;\n  overflow: hidden;\n}\n.errorRT-a282a {\n  padding: 5px;\n  border: 1px dashed #f5222d;\n}\n.errorRT-a282a .tt-a8441 {\n  font-size: 12px;\n  color: #f5222d;\n  font-weight: bold;\n  margin-bottom: 5px;\n}\n.errorRT-a282a .info-abfdc {\n  color: #f5222d;\n  margin-bottom: 5px;\n}\n",""]),i.locals={slot:"slot-ec09e",lyFlexColumn:"lyFlexColumn-e62bf",lyFlexRow:"lyFlexRow-bc7e7",justifyContentFlexStart:"justifyContentFlexStart-c566f",justifyContentFlexCenter:"justifyContentFlexCenter-f2551",justifyContentFlexFlexEnd:"justifyContentFlexFlexEnd-f18af",justifyContentFlexSpaceAround:"justifyContentFlexSpaceAround-dd0f6",justifyContentFlexSpaceBetween:"justifyContentFlexSpaceBetween-c1027",alignItemsFlexStart:"alignItemsFlexStart-fb8e7",alignItemsFlexCenter:"alignItemsFlexCenter-ad15a",alignItemsFlexFlexEnd:"alignItemsFlexFlexEnd-ded5b",debugFocus:"debugFocus-c5006",com:"com-e0c1f",flex:"flex-ecc94",error:"error-a9a37",errorRT:"errorRT-a282a",tt:"tt-a8441",info:"info-abfdc"};const c=i},38148:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(93379),s=n.n(o),r=n(7795),i=n.n(r),c=n(3565),a=n.n(c),l=n(19216),d=n.n(l),u=n(44589),p=n.n(u),f=n(96422),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=s()(f.Z,y)),m},m.unuse=function(){v>0&&!--v&&(g(),g=null)};const h=m},96868:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(93379),s=n.n(o),r=n(7795),i=n.n(r),c=n(3565),a=n.n(c),l=n(19216),d=n.n(l),u=n(44589),p=n.n(u),f=n(62495),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=s()(f.Z,y)),m},m.unuse=function(){v>0&&!--v&&(g(),g=null)};const h=m},53515:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(93379),s=n.n(o),r=n(7795),i=n.n(r),c=n(3565),a=n.n(c),l=n(19216),d=n.n(l),u=n(44589),p=n.n(u),f=n(20723),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=s()(f.Z,y)),m},m.unuse=function(){v>0&&!--v&&(g(),g=null)};const h=m},47309:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(93379),s=n.n(o),r=n(7795),i=n.n(r),c=n(3565),a=n.n(c),l=n(19216),d=n.n(l),u=n(44589),p=n.n(u),f=n(9508),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=s()(f.Z,y)),m},m.unuse=function(){v>0&&!--v&&(g(),g=null)};const h=m},68214:(e,t,n)=>{n.d(t,{Z:()=>h});var o=n(93379),s=n.n(o),r=n(7795),i=n.n(r),c=n(3565),a=n.n(c),l=n(19216),d=n.n(l),u=n(44589),p=n.n(u),f=n(37168),m={};f.Z&&f.Z.locals&&(m.locals=f.Z.locals);var g,v=0,y={};y.styleTagTransform=p(),y.setAttributes=a(),y.insert=function(e,t){(t.target||document.head).appendChild(e)},y.domAPI=i(),y.insertStyleElement=d(),m.use=function(e){return y.options=e||{},v++||(g=s()(f.Z,y)),m},m.unuse=function(){v>0&&!--v&&(g(),g=null)};const h=m},27579:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(33970),s=n(22995),r=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{a(o.next(e))}catch(e){r(e)}}function c(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const i="_rootFrame_";function c(e,{observable:t}){const{json:n,getComDef:c,env:a,ref:l,onError:d,logger:u,debug:p,debugLogger:f}=e,m=a._context,g=e.scenesOperate||a.scenesOperate,{slot:v,coms:y={},comsAutoRun:h={},cons:b=[],pinRels:I={},pinProxies:x={},pinValueProxies:w={},type:j}=n,E=a,S={},_={},C={},k={},O={};Object.keys(b).forEach((e=>{const t=b[e],{startPinParentKey:n}=t[0];n&&(O[n]=e)}));const P={},R={},A={},$={},T={},F={};function M(e,t,r){if("com"===e){const{com:e,pinHostId:i,val:c,fromCon:a,notifyAll:l,comDef:d,conId:u}=t;f?f("com","output",{id:e.id,pinHostId:i,val:(0,s.Am)(c),fromCon:a,notifyAll:l,comDef:d,sceneId:n.id,conId:u},r):(0,o.J2)(e.title,d,i,c)}else if("frame"===e){const{comId:e,frameId:o,pinHostId:i,val:c,sceneId:a,conId:l}=t;f&&f("frame","output",{comId:e,frameId:o,pinHostId:i,val:(0,s.Am)(c),sceneId:a||n.id,conId:l},r)}}function Z(e,t){const{com:r,pinHostId:i,val:c,frameKey:a,finishPinParentKey:l,comDef:d,conId:u}=e;f?f("com","input",{id:r.id,pinHostId:i,val:(0,s.Am)(c),frameKey:a,finishPinParentKey:l,comDef:d,sceneId:n.id,conId:u},t):(0,o.Wg)(r.title,d,i,c)}function N({logProps:e,cons:t,val:n,curScope:o,fromCon:c,notifyAll:a,fromCom:l,isAutoRun:d}){function u(e,t,n){var o,r;const i=x[e.comId+"-"+e.pinId];if(i){if(A[`${i.frameId}-${i.pinId}`]=n,c&&c.finishPinParentKey!==e.startPinParentKey)return;if("frame"===i.type){const o=D(e.comId,t);let r;r={id:(0,s.Vj)(10,16),frameId:i.frameId,parent:t,proxyComProps:o};const c="mybricks.core-comlib.frame-output"===e.def.namespace;c&&t&&(i.frameId=t.proxyComProps.id,r=t.parent);if("mybricks.core-comlib.fn"===e.def.namespace){const{configs:e}=o.data;e&&Object.entries(e).forEach((([e,t])=>{const{frameId:n,comId:o,pinId:s}=i,c=b[(o?`${o}-${n}`:`${n}`)+"-"+e];c&&N({logProps:null,cons:c,val:t,curScope:r})}))}return J({options:i,value:n,scope:r,comProps:o}),void(c||H({frameId:i.frameId,scope:r}))}}if("com"===e.type)c?c.finishPinParentKey===e.startPinParentKey&&K(e,n,t):K(e,n,t);else{if("frame"!==e.type)throw new Error("尚未实现");if(c&&c.finishPinParentKey!==e.startPinParentKey)return;if(e.comId){if("inner-input"===e.direction){const s=_[e.frameKey+"-"+e.pinId]||_[e.comId+"-"+e.frameId+"-"+((null===(o=null==t?void 0:t.parent)||void 0===o?void 0:o.id)?t.parent.id+"-":"")+e.pinId];s&&s(n)}else if("inner-output"===e.direction&&"joint"===e.pinType){const t=b[e.comId+"-"+e.frameId+"-"+e.pinId];t&&N({logProps:null,cons:t,val:n})}}else{const o=null==t?void 0:t.proxyComProps;if(o){const s=o.outputs[e.pinId];if(s)return void s(n,t.parent)}null===(r=k[e.pinId])||void 0===r||r.call(k,n)}}}p&&"module"!==j&&t.sort(((e,t)=>e.isBreakpoint&&!t.isBreakpoint?-1:!e.isBreakpoint&&t.isBreakpoint?1:0)),t.forEach((t=>r(this,void 0,void 0,(function*(){var s,r;const{comId:f,pinId:g,pinType:v,timerPinInputId:h,frameKey:b}=t,I=y[f];if(!(c&&c.finishPinParentKey!==t.startPinParentKey||p&&t.isIgnored)){if(p&&"module"!==j&&(null===(s=m.debuggerPanel)||void 0===s?void 0:s.hasBreakpoint(t))){let n=!0;yield null===(r=m.debuggerPanel)||void 0===r?void 0:r.wait(t,(()=>{n=!1,e&&(e[1].conId=t.id,e&&M(...e,!0))})),n&&e&&(e[1].conId=t.id,e&&M(...e))}else e&&M(...e);if("timer"===v)x({value:n,curScope:o});else if(a){const e=t.frameKey;if(e===i||d)w({pinId:g,value:n,component:I,curScope:null});else{const[s,r]=e.split("-");if($[e]){const n=$[e],o=n[l.id];o?o[t.id]=t:n[l.id]={[t.id]:t}}else{($[e]={})[l.id]={[t.id]:t}}if(l.parentComId)w({pinId:g,value:n,component:I,curScope:o});else{const e=S[`${s}-${r}`];e&&Object.entries(e).forEach((([e,t])=>{"scope"===(null==t?void 0:t.type)?t.curScope?w({pinId:g,value:n,component:I,curScope:t.curScope}):t.pushTodo((e=>{w({pinId:g,value:n,component:I,curScope:e})})):w({pinId:g,value:n,component:I,curScope:t.curScope})}))}}}else w({pinId:g,value:n,component:I,curScope:o})}function x({pinId:e,value:n,curScope:o}){let s=o;const r=e?Object.assign(Object.assign({},t),{pinId:e}):t;if(a){const e=r.frameKey;if(!e)throw new Error("数据异常，请检查toJSON结果.");u(r,e===i?{}:o,n)}else{const e=r.frameKey.split("-");if(e.length>=2&&!s){const t=z(e[0],e[1],null,!1);"scope"===(null==t?void 0:t.type)?t.curScope?u(r,t.curScope,n):t.pushTodo((e=>{u(r,e,n)})):u(r,s,n)}else u(r,s,n)}}function w({pinId:e,value:t,component:o,curScope:s}){const{isReady:r,isMultipleInput:i,pinId:c,value:a,cb:l}=function({pinId:e,value:t,component:o,curScope:s}){let r=e,i=t,c=!0;const a=e.indexOf("."),l=f+""+((null==s?void 0:s.id)?`-${s.id}`:"");if(o&&-1!==a){const{inputs:t}=o;r=e.substring(0,a);const s=e.substring(a+1);let d=P[l];d||(d=P[l]={}),d[s]=n;const u=new RegExp(`${r}.`),p=t.filter((e=>!!e.match(u)));Object.keys(d).length===p.length?i=d:c=!1}let d=r!==e;return{pinId:r,value:i,isReady:c,isMultipleInput:d,cb:d?()=>{Reflect.deleteProperty(P,l)}:null}}({pinId:e,value:t,component:o,curScope:s});if(r){const e={pinId:i?c:null,value:a,curScope:s};if(h){const t=h+"-"+b+((null==s?void 0:s.id)?`-${s.id}`:""),n=R[t];if(n){const{ready:o,todo:s}=n;if(o){let n=!1;Object.entries(s).forEach((([t,o])=>{t===c?(x(e),n=!0):o()})),n||x(e),null==l||l(),Reflect.deleteProperty(R,t)}else s[c]=()=>{null==l||l(),x(e)}}else R[t]={ready:!1,todo:{[c]:()=>{null==l||l(),x(e)}}}}else null==l||l(),x(e)}}}))))}function D(e,n){var o,s;const r=y[e];if(!r)return null;const l=e+(r.frameId||i);let f,m=S[l];m||(m=S[l]={});let v=n;for(!v&&r.parentComId&&r.frameId&&(v=null===(s=null===(o=S[`${r.parentComId}-${r.frameId}`])||void 0===o?void 0:o.slot)||void 0===s?void 0:s.curScope);v;){const t=v.id+"-"+e;if(v.frameId===r.frameId){f=v.id;const e=m[t];if(e)return e;{const e=v.parentComId;if(!e)break;if(e===r.paramId||e===r.parentComId)break}}v=v.parent}const h=(f?f+"-":"")+e,w=m[h];if(w)return w;const j=r.def,E=r.model,_=JSON.parse(JSON.stringify(E.data)),C=JSON.parse(JSON.stringify(E.style));C.__model_style__=!0;const k={},O={},P={},R={},$=function(e){return new Proxy({},{ownKeys:e=>r.inputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=null==e?void 0:e.inputs;if(o){const e=o[n];"function"==typeof e&&e(t)}k[n]=t;const s=O[n];s&&(s.forEach((({val:e,fromCon:n,fromScope:o})=>{t(e,new Proxy({},{get:(e,t)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;const s=L()[t];if("function"!=typeof s)throw new Error(`outputs.${t} not found`);s(e,o||v,n)}}))})),O[n]=void 0)}})},Z=new Proxy({},{get:(t,o)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const s=I[e+"-"+o];if(s){const r={},i={};return s.forEach((e=>{r[e]=t=>{i[e]=t}})),Promise.resolve().then((()=>{K({comId:e,def:j,pinId:o},t,n,i)})),r}K({comId:e,def:j,pinId:o},t,n)}}),B=new Proxy({},{get:(t,n)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(n))return;const o=x[e+"-"+n];o&&(null==g||g.inputs(Object.assign(Object.assign({},o),{value:t,parentScope:J})))}}),L=function(t){return new Proxy({},{ownKeys:e=>r.outputs,getOwnPropertyDescriptor:e=>({enumerable:!0,configurable:!0}),get(o,s,i){const l=function(o,i,l,d){if("[object Symbol]"===Object.prototype.toString.call(s))return;const u="boolean"==typeof i&&i;if(u){if(r.parentComId){const t=`${r.parentComId}-${r.frameId}`;F[t]?F[t][e]=!0:F[t]={[e]:!0}}if(T[`${r.id}${(null==n?void 0:n.id)?`-${n.id}`:""}`]=o,r.global&&!d)return void(null==g||g.exeGlobalCom({com:r,value:o,pinId:s}))}const p=arguments,f=null==t?void 0:t.outputs;if(f){const e=f[s];"function"==typeof e&&e(o)}let m;i&&"object"==typeof i&&(m=i);const v=c(j),y=E.outputEvents;let h;if(y){const t=y[s];if(t&&Array.isArray(t)){const n=t.find((e=>e.active));if(n){const{type:t}=n;switch(t){case"none":h=[];break;case"fx":const r=x[e+"-"+s];if("frame"===(null==r?void 0:r.type)){const e=`${r.frameId}-${r.pinId}`;h=b[e]||[],A[e]=o}else h=[];break;case"defined":break;default:if(h=[],Array.isArray(null==a?void 0:a.events)){const e=a.events.find((e=>{if(e.type===t)return e}));e&&"function"==typeof e.exe&&e.exe({options:n.options})}}}}}h=h||b[e+"-"+s],(null==h?void 0:h.length)?N(p.length>=3&&void 0===d?{logProps:["com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:u,comDef:v}],cons:h,val:o,curScope:m,fromCon:l,fromCom:r}:{logProps:["com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:u,comDef:v}],cons:h,val:o,curScope:m||n,fromCon:l,notifyAll:u,fromCom:r}):M("com",{com:r,pinHostId:s,val:o,fromCon:l,notifyAll:u,comDef:v})};return l.getConnections=()=>b[e+"-"+s]||[],l}})},z=new Proxy({},{get:(e,t,n)=>function(e){if("[object Symbol]"===Object.prototype.toString.call(t))return;P[t]=e;const n=R[t];n&&(n.forEach((t=>{e(t)})),R[t]=void 0)}}),H=new Proxy({},{get:(t,o,s)=>function(t){if("[object Symbol]"===Object.prototype.toString.call(o))return;const s=b[e+"-"+o];s?N({logProps:["com",{com:r,pinHostId:o,val:t,comDef:j}],cons:s,val:t,curScope:n}):M("com",{com:r,pinHostId:o,val:t,comDef:j})}});const J={id:r.id,title:r.title,frameId:r.frameId,parentComId:r.parentComId,data:t(_),style:t(C),_inputRegs:k,addInputTodo:(e,t,n,o)=>{let s=O[e];s||(O[e]=s=[]),s.push({val:t,fromCon:n,fromScope:o})},inputs:$(),inputsCallable:Z,_inputsCallable:B,outputs:L(),_inputs:z,_outputs:H,clone(e){const t={inputs:$(e),outputs:L(e)};return Object.setPrototypeOf(t,this),t},_notifyBindings:function(e){if(r.global)return void(null==g||g._notifyBindings(e,r));const{bindingsTo:t}=r.model;if(t)for(let n in t){const o=D(n);if(o){const s=t[n];Array.isArray(s)&&s.forEach((t=>{let n=o;const s=t.split(".");s.forEach(((t,o)=>{o!==s.length-1?n=n[t]:n[t]=e}))}))}}},logger:u,onError:p?t=>d({comId:e,error:t}):d};return m[h]=J,J}function B(e,t){let n=A[`${e}${t?`-${t.id}-${t.frameId}`:""}`];return void 0===n&&(null==t?void 0:t.parent)&&(n=B(e,t.parent)),n}function K(e,t,o,s){var r;const{comId:a,def:l,pinId:f,pinType:m,frameKey:v,finishPinParentKey:h,timerPinInputId:x}=e;if("ext"===m){const n=S[a]||D(a,o);if("show"===f)n.style.display="";else if("hide"===f)n.style.display="none";else if("showOrHide"===f){const e=n.style;void 0===t?"none"===e.display?e.display="":e.display="none":e.display=t?"":"none"}const s=c(l);Z({com:n,val:t,pinHostId:f,frameKey:v,finishPinParentKey:h,comDef:s,conId:e.id})}else if("config"===m){const n=D(a,o),s=c(l);Z({com:n,pinHostId:f,val:t,frameKey:v,finishPinParentKey:h,comDef:s,conId:e.id});const{extBinding:r}=e,i=r.split(".");let d=n;i.forEach(((e,n)=>{n!==i.length-1?d=d[e]:d[e]=t}))}else if("timer"===m){const n=D(a,o),s=c(l);Z({com:n,pinHostId:f,val:t,frameKey:v,finishPinParentKey:h,comDef:s,conId:e.id});const r=x+"-"+v+((null==o?void 0:o.id)?`-${o.id}`:""),i=R[r];if(i){const{todo:e}=i;Object.entries(e).forEach((([e,t])=>t())),Reflect.deleteProperty(R,r)}else R[r]={ready:!0,todo:{}}}else if(null===(r=l.rtType)||void 0===r?void 0:r.match(/^js/gi)){const s=y[a];if(s){const r=D(a,o),m=c(l);if(s.global){const e=null==g?void 0:g.getGlobalComProps(a);e&&(r.data=e.data)}const y=null==o?void 0:o.id,b=(y?y+"-":"")+a;s.inputs.find((e=>e===f))?Z({com:s,val:t,pinHostId:f,frameKey:v,finishPinParentKey:h,comDef:m,conId:e.id}):Object.entries(t).forEach((([t,n])=>{Z({com:s,val:n,pinHostId:`${f}.${t}`,frameKey:v,finishPinParentKey:h,comDef:m,conId:e.id})})),C[b]||(C[b]=!0,m.runtime({env:E,data:r.data,inputs:r.inputs,outputs:r.outputs,_notifyBindings:r._notifyBindings,_inputsCallable:r._inputsCallable,logger:u,onError:p?e=>d({comId:a,error:e}):d}));const I=r._inputRegs[f];"function"==typeof I&&I(t,new Proxy({},{get:(t,s)=>function(t){if("[object Symbol]"!==Object.prototype.toString.call(s)){if(w){const e=w[`${a}-${f}`];if(e){const s=e.frameId;void 0===(t=B(`${s===n.id?i:v}-${e.pinId}`,o))&&(t=B(`${s===n.id?i:v}-${e.pinId}`,null))}}r.outputs[s](t,o,e)}}}))}}else{const n=D(a,o);if(!n)return;const r=c(l);Z({com:n,pinHostId:f,val:t,frameKey:v,finishPinParentKey:h,comDef:r,conId:e.id});const i=n._inputRegs[f];if("function"==typeof i){let r;r=s||new Proxy({},{get:(t,s)=>function(t){"[object Symbol]"!==Object.prototype.toString.call(s)&&n.outputs[s](t,o,e)}}),i(t,r)}else n.addInputTodo(f,t,e,o)}if(h){const e=b[O[h]];e&&!I[`${a}-${f}`]&&N({logProps:null,cons:e,val:void 0})}}function L(e,t){let n;return(null==e?void 0:e.comAry)&&e.comAry.find((e=>{if(e.id===t)return n=e,e;if(e.slots)for(let o in e.slots)if(n=L(e.slots[o],t),n)return n})),n}function z(e,t,n,o){const s=`${e}-${t}`;let r=S[s];r||(r=S[s]={});let i=n?n.id:"slot",c=r[i];if(o&&!c&&console.log("不应该再走到这儿了: ",{comId:e,slotId:t,scope:n,notifyAll:o}),!c){const o=L(v,e);if(!(null==o?void 0:o.slots))return null;const a=null==o?void 0:o.slots[t],l={};let d;if(n){const n=S[e+"-"+t];n&&(d=n.todo)}const u={scope:n,todo:d},p=new Proxy({},{get:(e,t)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(l[t]=e)}}),f=new Proxy({},{get(n,o){const s=function(n,s){if("[object Symbol]"===Object.prototype.toString.call(o))return;const r=e+"-"+t+"-"+o,i=b[r];A[`${r}${s?`-${s.id}-${s.frameId}`:""}`]=n,i?N({logProps:["frame",{comId:e,frameId:t,pinHostId:o,val:n}],cons:i,val:n,curScope:s||u.scope}):M("frame",{comId:e,frameId:t,pinHostId:o,val:n})};return s.getConnections=()=>b[e+"-"+t+"-"+o]||[],s}}),m=new Proxy({},{get:(e,t,n)=>function(e){"[object Symbol]"!==Object.prototype.toString.call(t)&&(_[i+"-"+t]=e,_[s+"-"+t]=e)}});let g={};c=r[i]={type:null==a?void 0:a.type,run(n){let o=u.scope;n&&o!==n&&(u.scope=n,o=n);const s=(null==o?void 0:o.id)||"none";if(g[s]||(g[s]=!0,H({comId:e,frameId:t,scope:o})),Array.isArray(u.todo)&&(u.todo.forEach((e=>{Promise.resolve().then((()=>{e(o)}))})),u.todo=void 0),o&&"slot"!==i){const n=$[`${e}-${t}`];Promise.resolve().then((()=>{n&&Object.entries(n).forEach((([e,t])=>{if(!y[e].parentComId){const n=Object.entries(t).map((([e,t])=>t));n.length&&N({logProps:null,cons:n,val:T[e],curScope:o,notifyAll:!0,fromCom:y[e],isAutoRun:!0})}}))}))}},destroy(){if(n){const e=`${n.parentComId}-${n.frameId}`,t=F[e];t&&Object.keys(t).forEach((e=>{Reflect.deleteProperty(T,`${e}-${n.id}`)}))}Reflect.deleteProperty(r,i)},_inputs:p,_inputRegs:l,inputs:f,outputs:m,get curScope(){return u.scope},setCurScope(e){u.scope=e},get todo(){return u.todo},pushTodo(e){u.todo||(u.todo=[]),u.todo.push(e)}}}return c}function H(e){const{comId:t,frameId:n,scope:s}=e,r=h[t?`${t}-${n}`:`${n}`];r&&r.forEach((e=>{const{id:t,def:n}=e;if(y[t]){const e=D(t,s),r=c(n);(0,o.cM)(`${r.namespace} 开始执行`),r.runtime({env:E,data:e.data,inputs:e.inputs,outputs:e.outputs,_inputsCallable:e._inputsCallable,logger:u,onError:p?e=>d({comId:t,error:e}):d})}}))}function J({options:e,value:t,scope:o,log:s=!0,comProps:r}){const{frameId:c,comId:a,pinId:l,sceneId:d}=e,u=b[(a?`${a}-${c}`:`${c}`)+"-"+l];A[`${c}-${l}`]=t,u?N({logProps:["frame",{comId:a,frameId:c,pinHostId:l,val:t,sceneId:d}],cons:u,val:t,curScope:o}):(s&&M("frame",{comId:a,frameId:c,pinHostId:l,val:t,sceneId:d}),c!==i&&(n.id===c?k[l](t):null==g||g.open({frameId:c,todo:{pinId:l,value:t},comProps:r,parentScope:o.proxyComProps})))}const W={get({comId:e,slotId:t,scope:n,_ioProxy:o}){let s;if(o&&(o.inputs||o.outputs||o._inputs||o._outputs)&&(s=o),t)return z(e,t,n);{const t=D(e,n);return s?t.clone(s):t}},getComInfo:e=>y[e]};if("function"==typeof l){const e={run(){H({frameId:i})},inputs:new Proxy({},{get:(e,t)=>function(e,n=void 0,o=!0){"[object Symbol]"!==Object.prototype.toString.call(t)&&J({options:{frameId:i,pinId:t,sceneId:n},value:e,scope:void 0,log:o})}}),outputs(e,t){k[e]=t},get:W.get,getComInfo:W.getComInfo};m&&"module"===j&&m.setRefs(n.id,e),l(e)}return W}},33970:(e,t,n)=>{n.d(t,{J2:()=>l,JE:()=>s,Wg:()=>a,cM:()=>c});let o=!1;function s(){o=!0}const r="__IOEventList__",i={log:(...e)=>{window[r]||(window[r]=[]),window[r].push(e[0]),console.log(...e)}};function c(e){console.log(`%c[Mybricks]%c ${e}\n`,"color:#FFF;background:#fa6400","","")}function a(e,t,n,s){if(o)return;let r;try{r=JSON.stringify(s)}catch(e){r=s}i.log(`%c[Mybricks] 输入项 %c ${e||t.title||t.namespace} | ${n} -> ${r}`,"color:#FFF;background:#000","","")}function l(e,t,n,s){if(o)return;let r;try{r=JSON.stringify(s)}catch(e){r=s}i.log(`%c[Mybricks] 输出项 %c ${e||t.title||t.namespace} | ${n} -> ${r}`,"color:#FFF;background:#fa6400","","")}},22995:(e,t,n)=>{function o(e){return e&&"object"==typeof e}function s(e){return"number"==typeof e&&!isNaN(e)}function r(e,t){const n=e.split("."),o=t.split("."),s=n.length,r=o.length,i=Math.min(s,r);let c=0;for(;c<i;c++){let e=parseInt(n[c]),t=parseInt(o[c]);if(e>t)return 1;if(e<t)return-1}if(s>r){for(let e=c;e<s;e++)if(0!=parseInt(n[e]))return 1;return 0}if(s<r){for(let e=c;e<r;e++)if(0!=parseInt(o[e]))return-1;return 0}return 0}function i(e=5,t=8){const n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),o=[];if(t=t||n.length,e)for(let s=0;s<e;s++)o[s]=n[0|Math.random()*t];else{let e;o[8]=o[13]=o[18]=o[23]="-",o[14]="4";for(let t=0;t<36;t++)o[t]||(e=0|16*Math.random(),o[t]=n[19==t?3&e|8:e])}return o.join("")}function c(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}n.d(t,{Am:()=>g,Kn:()=>o,Lc:()=>c,Ok:()=>f,Q1:()=>p,Vj:()=>i,hj:()=>s,nZ:()=>m,yC:()=>r});const a=function(e,t,n,o){return function(s,r){var i,c,a,l,d=parseFloat(r);return!r||d<=t?s:"".concat((i=d/e,c=n,a=Math.pow(10,c+1),l=Math.floor(i*a),10*Math.round(l/10)/a)).concat(o)}},l=a(12,0,5,"rem"),d=a(3.75,0,5,"vw"),u=/"[^"]+"|'[^']+'|url\([^)]+\)|(\d*\.?\d+)px/g,p=e=>e.replace(u,l),f=e=>e.replace(u,d),m=(e,t)=>{var n;const o=t||(null===(n=document.getElementById("_mybricks-geo-webview_"))||void 0===n?void 0:n.shadowRoot)||document.head;e.use({target:o})};function g(e){return e}},98520:(e,t,n)=>{n.d(t,{x:()=>d});var o=n(90359),s=n.n(o),r=n(24318),i=n.n(r);const c=n(38148).Z.locals,a=s().createElement("svg",{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10635",width:"12",height:"12"},s().createElement("path",{d:"M219.428571 73.142857v877.714286H73.142857V73.142857zM365.714286 73.142857l585.142857 438.857143-577.828572 438.857143L365.714286 599.771429","p-id":"10636",fill:"#707070"}));function l({resume:e}){return s().createElement("div",{className:c.debugger},s().createElement("div",{className:c.titlebar},s().createElement("div",null,"已在交互视图中暂停"),s().createElement("div",{className:c.resume,onClick:e},a)))}class d{constructor({env:e}){this.isReact18=!!i().createRoot,this.resume=()=>{},this._pending=!1,this._ignoreWait=!1,this._waitCount=0,this._waitBreakpointIds=[],this._waitIdToResolvesMap={},this.env=e}setResume(e){this.resume=e}open(){if(this.dom)this.dom.style.visibility="visible";else{const e=document.createElement("div"),t=this.env.canvasElement;if(this.canvas=t,this.dom=e,e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.zIndex="100000",e.style.visibility="visible",t.appendChild(e),this.isReact18){const t=i().createRoot(e);t.render(s().createElement(l,{resume:this.resume})),this.root=t}else i().render(s().createElement(l,{resume:this.resume}),e)}}close(){this.dom&&(this.dom.style.visibility="hidden")}destroy(){this.dom&&requestAnimationFrame((()=>{this.isReact18?this.root.unmount():i().unmountComponentAtNode(this.dom),this.root=null,this.canvas.removeChild(this.dom),this.canvas=null,this.dom=null}))}hasBreakpoint(e){return!this._ignoreWait&&(this._pending||e.isBreakpoint)}wait(e,t){return new Promise((n=>{if(this._ignoreWait)n();else{const o=this._waitBreakpointIds.length>0;if(o||t(),this.open(),this._pending=!0,e.isBreakpoint){if(o){const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(t)}const s=this._waitCount+++e.id;this._waitBreakpointIds.unshift(s),this._waitIdToResolvesMap[s]=[n]}else{const e=this._waitBreakpointIds[0];this._waitIdToResolvesMap[e].push(n)}}}))}next(e=!1){if(e)for(;this._waitBreakpointIds.length;)this.next();else{const e=this._waitBreakpointIds.pop(),t=this._waitIdToResolvesMap[e];t&&t.forEach((e=>e())),this._waitBreakpointIds.length||(this._pending=!1,this.close())}}setIgnoreWait(e){this._ignoreWait=e}}},77966:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(90359),s=n.n(o),r=n(5415);const i=n(96868).Z.locals;class c extends s().PureComponent{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){var t;return{hasError:!0,error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))}}componentDidCatch(e,t){var n,o;console.error(e,t),r.Z.error(e),this.setState({error:(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e)),errorInfo:(null==t?void 0:t.stack)||(null==t?void 0:t.message)||(null===(o=null==t?void 0:t.toString)||void 0===o?void 0:o.call(t))})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:o,errorTip:r}=this.props;return e?s().createElement("div",{className:i.error},s().createElement("div",null,r||"渲染错误"),s().createElement("div",null,t||n)):o}}},73934:(e,t,n)=>{n.d(t,{Z:()=>p});var o=n(90359),s=n.n(o),r=n(50828),i=n(27579),c=n(48959),a=n(5415),l=n(77966),d=n(44242);let u=1;function p({json:e,opts:t,style:n={},className:p="",root:f=!0}){const{env:m,onError:g,logger:v,slot:y,getComDef:h}=(0,o.useMemo)((()=>{var o,s,i,c;if(1===u){u=2;const p=null===(o=t.env)||void 0===o?void 0:o.pxToRem;if(p){const{enableAdaptive:f=!1,landscapeWidth:m=1440}=p,g=document.documentElement;if(f){function v(){g.style.fontSize=g.clientWidth/(m/12)+"px"}v(),window.addEventListener("resize",v)}else g.style.fontSize="12px"}}const{env:a,debug:l}=t;l&&"module"!==e.type&&(n.minHeight=800),a.runtime||(a.runtime={}),a.i18n||(a.i18n=e=>e),a.canvas||(a.canvas={type:window.document.body.clientWidth<=414?"mobile":"pc"}),"canvasElement"in a||(a.canvasElement=l&&((null===(s=t.env)||void 0===s?void 0:s.shadowRoot)||(null===(c=null===(i=document.getElementById("_mybricks-geo-webview_"))||void 0===i?void 0:i.shadowRoot)||void 0===c?void 0:c.getElementById("_geoview-wrapper_")))||document.body),t.env.renderModule||(t.env.renderModule=(e,t)=>(0,r.render)(e,Object.assign(Object.assign({},t),{env:a})));const{_context:d}=a;return{env:a,onError:d.onError,logger:d.logger,getComDef:e=>d.getComDef(e),slot:e.slot}}),[]),[b,I,x]=(0,o.useMemo)((()=>{var n;try{let n,o=!0;return[(0,i.Z)({json:e,getComDef:h,events:t.events,env:m,ref(e){n=e,"function"==typeof t.ref&&(t.ref(e),o=!1)},onError:g,debug:t.debug,debugLogger:t.debugLogger,logger:v,scenesOperate:t.scenesOperate},{observable:t.observable||d.L}),n,o]}catch(e){throw console.error(e),a.Z.error(`导出的JSON.script执行异常: ${(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(n=null==e?void 0:e.toString)||void 0===n?void 0:n.call(e))}`),new Error("导出的JSON.script执行异常.")}}),[]);return(0,o.useLayoutEffect)((()=>{if(!t.disableAutoRun){if(x){const{inputs:n}=I,o=e.inputs;n&&Array.isArray(o)&&o.forEach((e=>{const{id:o,mockData:s}=e;let r;if(t.debug&&void 0!==s)try{r=JSON.parse(decodeURIComponent(s))}catch(e){r=s}n[o](r)}))}I.run()}}),[]),(0,o.useEffect)((()=>{const e=[];let n;const o=t.debug&&"mySetInterval"!==setInterval.name;return o&&(n=setInterval,setInterval=function(...t){const o=n(...t);return e.push(o),o}),()=>{var s,r;o&&("function"==typeof t.debug&&(null===(r=null===(s=t.env._context)||void 0===s?void 0:s.debuggerPanel)||void 0===r||r.destroy()),setInterval=n,e.forEach((e=>clearInterval(e))))}}),[]),s().createElement(l.Z,{errorTip:"页面渲染错误"},s().createElement(c.Z,{env:m,style:n,_env:t._env,slot:y,getComDef:h,context:b,className:p,createPortal:t.createPortal||(()=>{}),onError:g,logger:v,root:f}))}},69332:(e,t,n)=>{n.d(t,{Z:()=>u});var o=n(90359),s=n.n(o),r=n(73934),i=n(27579),c=n(44242),a=n(53515),l=function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{a(o.next(e))}catch(e){r(e)}}function c(e){try{a(o.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,c)}a((o=o.apply(e,t||[])).next())}))};const d=a.Z.locals;function u({json:e,opts:t}){const[n,r]=(0,o.useState)(0),[a,u]=(0,o.useState)([]),[m,g]=(0,o.useState)([]),{scenesMap:v,scenesOperateInputsTodo:y,themes:h,permissions:b,globalVarMap:I}=(0,o.useMemo)((()=>{if(t.sceneId){const n=e.scenes.findIndex((e=>e.id===t.sceneId));if(-1!==n){const t=e.scenes.splice(n,1);e.scenes.unshift(...t),"popup"===t[0].type&&u([t[0].id])}}const n=[];e.scenes.forEach(((e,t)=>{"popup"===e.type?t||u([e.id]):n.push(e)})),g(n);const{modules:o,definedComs:s}=e;return t.env.getDefinedComJSON||(t.env.getDefinedComJSON=e=>s[e].json),t.env.getModuleJSON=e=>{var t;return null===(t=null==o?void 0:o[e])||void 0===t?void 0:t.json},{scenesMap:e.scenes.reduce(((e,t,n)=>{var o;return Object.assign(Object.assign({},e),{[t.id]:{show:0===n,todo:[],json:t,disableAutoRun:!!n,useEntryAnimation:!1,type:(null===(o=t.slot)||void 0===o?void 0:o.showType)||t.type}})}),{}),scenesOperateInputsTodo:{},themes:e.themes,permissions:e.permissions||[],globalVarMap:{}}}),[]);(0,o.useMemo)((()=>{if(t.ref){const e=t.ref;t.ref=n=>o=>(n(o),e.call(t,o))}else t.ref=e=>t=>{e(t)}}),[]);const{fxToJsonMap:x,currentFxFrameIdsMap:w}=(0,o.useMemo)((()=>{const t={},{global:n}=e;if(n){const{fxFrames:e}=n;Array.isArray(e)&&e.forEach((e=>{t[e.id]=e}))}return{fxToJsonMap:t,currentFxFrameIdsMap:{}}}),[]),j=(0,o.useCallback)((n=>{var o;const s=v[n],a=t.env.hasPermission,{env:d}=t;d.themes=h,d.permissions=b,"function"==typeof a&&Object.defineProperty(d,"hasPermission",{get:function(){return e=>{if("string"==typeof e){const t=b.find((t=>t.id===e));return a({permission:t})}return a(e)}}}),d.canvas=Object.assign({id:n,type:window.document.body.clientWidth<=414?"mobile":"pc",open:(e,n,o)=>l(this,void 0,void 0,(function*(){var n;let s=v[e];if(!s){if("function"!=typeof t.scenesLoader)return void console.error(`缺少场景信息: ${e}`);const o=yield t.scenesLoader({id:e});if(s={disableAutoRun:!1,json:o,show:!1,parentScope:null,todo:[],type:(null===(n=o.slot)||void 0===n?void 0:n.showType)||o.type,useEntryAnimation:!1},v[e]=s,"popup"===o.type||g((e=>[...e,o])),y[e]){const{parentScope:t,todo:n}=y[e];s.parentScope=t,n.forEach((({value:e,pinId:t,parentScope:n})=>{s.todo=s.todo.concat({type:"inputs",todo:{pinId:t,value:e}})}))}}o?Object.entries(v).forEach((([t,n])=>{t===e?(n.useEntryAnimation="blank"===o,n.show=!0,"popup"===n.type?u((t=>[...t,e])):r((e=>e+1))):(n.show=!1,"popup"===n.type?u((e=>e.filter((e=>e!==n.json.id)))):r((e=>e+1)))})):s.show||(s.useEntryAnimation="blank"===o,s.show=!0,"popup"===s.type?u((t=>[...t,e])):r((e=>e+1)))}))},null===(o=t.env)||void 0===o?void 0:o.canvas);const p={open({todo:n,frameId:o,parentScope:s,comProps:a}){var l;const d=v[o];if(d)d.show||(d.show=!0,d.todo=d.todo.concat({type:"inputs",todo:n}),d.parentScope=s,"popup"===d.type?u((e=>[...e,o])):r((e=>e+1)));else{const r=x[o];if(r)if(w[s.id]){const{_refs:e}=w[s.id];w[s.id].parentScope=s;const t=null===(l=null==a?void 0:a.data)||void 0===l?void 0:l.configs;t&&Object.entries(t).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{w[s.id]={};const{id:o}=r,{env:l}=t,d={open({todo:n,frameId:o,parentScope:s,comProps:r}){var a;const l=x[o];if(l)if(w[s.id]){const{_refs:e}=w[s.id];w[s.id].parentScope=s;const t=null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.configs;t&&Object.entries(t).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()}else{w[s.id]={};const{env:o}=t,a={open({todo:e,frameId:t,parentScope:n,comProps:o}){var s;const r=w[n.id];if(null==r?void 0:r._refs){w[n.id].parentScope=n;const t=null===(s=null==o?void 0:o.data)||void 0===s?void 0:s.configs;t&&Object.entries(t).forEach((([e,t])=>{r._refs.inputs[e](t,void 0,!1)})),r._refs.inputs[e.pinId](e.value,void 0,!1),r._refs.run()}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const s=v[e];s?(s.parentScope=t,s._refs?s._refs.inputs[o](n):s.todo=s.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):y[e]?y[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):y[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in v){const s=v[o];if(s.json.coms[t])if(s._refs)f(s._refs,t,n[t],e);else{const o=n[t];s.todo=s.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=v[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const s=e.id;I[s]=t,Object.keys(v).forEach((e=>{const o=v[e];if(o.show&&o._refs){const e=o._refs.get({comId:s});e&&e.outputs[n](t,!0,null,!0)}}));const r=o._context.getRefsMap();Object.entries(r).forEach((([e,o])=>{const r=o.get({comId:s});r&&r.outputs[n](t,!0,null,!0)}))}},{_context:d}=o;(0,i.Z)({json:l,getComDef:e=>d.getComDef(e),events:t.events,env:o,ref(e){var t;w[s.id]._refs=e,w[s.id].parentScope=s;const{inputs:o,outputs:i}=e;l.outputs.forEach((e=>{i(e.id,(t=>{var n;null===(n=w[s.id].parentScope)||void 0===n||n.outputs[e.id](t)}))}));const c=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:d.onError,debug:t.debug,debugLogger:t.debugLogger,logger:d.logger,scenesOperate:a},{observable:t.observable||c.L})}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const s=v[e];s?(s.parentScope=t,s._refs?s._refs.inputs[o](n):s.todo=s.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):y[e]?y[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):y[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in v){const s=v[o];if(s.json.coms[t])if(s._refs)f(s._refs,t,n[t],e);else{const o=n[t];s.todo=s.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=v[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;I[o]=t,Object.keys(v).forEach((e=>{const s=v[e];if(s.show&&s._refs){const e=s._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}));const s=l._context.getRefsMap();Object.entries(s).forEach((([e,s])=>{const r=s.get({comId:o});r&&r.outputs[n](t,!0,null,!0)}))}},{_context:u}=l;(0,i.Z)({json:r,getComDef:e=>u.getComDef(e),events:t.events,env:l,ref(e){var t;w[s.id]._refs=e,w[s.id].parentScope=s;const{inputs:o,outputs:i}=e;r.outputs.forEach((e=>{i(e.id,(t=>{var n;null===(n=w[s.id].parentScope)||void 0===n||n.outputs[e.id](t)}))}));const c=null===(t=null==a?void 0:a.data)||void 0===t?void 0:t.configs;c&&Object.entries(c).forEach((([t,n])=>{e.inputs[t](n,void 0,!1)})),e.inputs[n.pinId](n.value,void 0,!1),e.run()},onError:u.onError,debug:t.debug,debugLogger:t.debugLogger,logger:u.logger,scenesOperate:d},{observable:t.observable||c.L})}}},inputs({frameId:e,parentScope:t,value:n,pinId:o}){const s=v[e];s?(s.parentScope=t,s._refs?s._refs.inputs[o](n):s.todo=s.todo.concat({type:"inputs",todo:{pinId:o,value:n}})):y[e]?y[e].todo.push({frameId:e,parentScope:t,value:n,pinId:o}):y[e]={parentScope:t,todo:[{value:n,pinId:o}]}},_notifyBindings(e,t){const{bindingsTo:n}=t.model;if(n)for(let t in n)for(let o in v){const s=v[o];if(s.json.coms[t])if(s._refs)f(s._refs,t,n[t],e);else{const o=n[t];s.todo=s.todo.concat({type:"globalVar",todo:{comId:t,bindings:o,value:e}})}}},getGlobalComProps(t){var n;return null===(n=v[e.scenes[0].id]._refs)||void 0===n?void 0:n.get({comId:t})},exeGlobalCom({com:e,value:t,pinId:n}){const o=e.id;I[o]=t,Object.keys(v).forEach((e=>{const s=v[e];if(s.show&&s._refs){const e=s._refs.get({comId:o});e&&e.outputs[n](t,!0,null,!0)}}));const s=d._context.getRefsMap();Object.entries(s).forEach((([e,s])=>{const r=s.get({comId:o});r&&r.outputs[n](t,!0,null,!0)}))}};return d.scenesOperate=p,Object.assign(Object.assign({},t),{env:d,get disableAutoRun(){return s.disableAutoRun},ref:t.ref((e=>{s._refs=e;const o=s.todo,{inputs:i,outputs:c}=e,a=s.disableAutoRun;s.json.outputs.forEach((e=>{c(e.id,(t=>{var n,o;"apply"===e.id?null===(n=s.parentScope)||void 0===n||n.outputs[e.id](t):(s.show=!1,s.todo=[],s._refs=null,null===(o=s.parentScope)||void 0===o||o.outputs[e.id](t),s.parentScope=null,"popup"===s.type?u((e=>e.filter((e=>e!==s.json.id)))):r((e=>e+1)))}))})),o.length?(o.forEach((({type:t,todo:o})=>{if("inputs"===t)Promise.resolve().then((()=>{i[o.pinId](o.value,n)}));else if("globalVar"===t){const{comId:t,value:n,bindings:s}=o;f(e,t,s,n)}})),s.todo=[]):a||(s.disableAutoRun=!0,Promise.resolve().then((()=>{var e,n;null===(n=null===(e=s.json.inputs)||void 0===e?void 0:e.forEach)||void 0===n||n.call(e,(e=>{const{id:n,mockData:o}=e;let s;if(t.debug&&void 0!==o)try{s=JSON.parse(decodeURIComponent(o))}catch(e){s=o}i[n](s)}))}))),a&&Promise.resolve().then((()=>{e.run()}))})),_env:{loadCSSLazy(){},currentScenes:{close(){s.show=!1,s.todo=[],s._refs=null,"popup"===s.type?u((e=>e.filter((e=>e!==s.json.id)))):r((e=>e+1))}}},scenesOperate:p})}),[]),E=(0,o.useMemo)((()=>m.length?m.map((e=>{const{id:t}=e,n=v[t];return n.show&&s().createElement(p,{key:t,json:Object.assign(Object.assign({},e),{scenesMap:v}),opts:j(t),className:n.useEntryAnimation?d.main:"",style:"popup"===n.type?{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}:{}})})):null),[n,m]),S=(0,o.useMemo)((()=>a.length?a.map((e=>{const t=v[e].json,{id:n}=t;return s().createElement(p,{key:t.id,json:Object.assign(Object.assign({},t),{scenesMap:v}),opts:j(n),style:{position:"absolute",top:0,left:0,backgroundColor:"#ffffff00"}})})):null),[a]);return s().createElement(s().Fragment,null,E,S)}function p({json:e,opts:t,style:n={},className:o=""}){return s().createElement(r.Z,{json:e,opts:t,style:n,className:o})}function f(e,t,n,o){const s=e.get({comId:t});s&&Array.isArray(n)&&n.forEach((e=>{let t=s;const n=e.split(".");n.forEach(((e,s)=>{s!==n.length-1?t=t[e]:t[e]=o}))}))}},5415:(e,t,n)=>{n.d(t,{Z:()=>v});var o=n(90359),s=n.n(o),r=n(24318),i=n.n(r);const c=n(47309).Z.locals;let a=!1;var l;!function(e){e.Error="error"}(l||(l={}));const d="__fz-debug-info-container__";let u,p=document.getElementById(d),f=0;const m=({content:e,type:t})=>{const[n,r]=(0,o.useState)([]),i=e=>{const t=`__fz-notification-id-${++f}__`;e=Object.assign({_nid:t},e),r((t=>[...t,e]))},a=e=>{r((t=>t.filter((t=>t._nid!==e))))};return(0,o.useEffect)((()=>{u={add:i,remove:a},e&&u.add({content:e,type:t})}),[]),s().createElement("div",{className:c.container},n.map((e=>s().createElement("div",{key:e._nid,className:c.itemWrap},s().createElement("div",{className:`${c.item} ${c.errorItem}`},s().createElement("svg",{className:c.closeIcon,viewBox:"0 0 1045 1024",xmlns:"http://www.w3.org/2000/svg",onClick:()=>u.remove(e._nid)},s().createElement("path",{d:"M282.517333 213.376l-45.354666 45.162667L489.472 512 237.162667 765.461333l45.354666 45.162667L534.613333 557.354667l252.096 253.269333 45.354667-45.162667-252.288-253.44 252.288-253.482666-45.354667-45.162667L534.613333 466.624l-252.096-253.226667z",fill:"#555555"})),e.content)))))},g=["ResizeObserver loop limit exceeded"],v={init:e=>{a=!1!==e,a&&(window.onerror=function(e,t,n,o,s){if("string"!=typeof e||!g.includes(e))return!1})},error:e=>{var t;if(a){const n=(null==e?void 0:e.stack)||(null==e?void 0:e.message)||(null===(t=null==e?void 0:e.toString)||void 0===t?void 0:t.call(e))||e;if("string"==typeof n&&g.includes(n))return;((e,t)=>{let n={content:"",type:t};if("string"==typeof e)n.content=e;else try{n.content=JSON.stringify(e)}catch(t){console.error("showNotification JSON.stringify Error",t,{message:e})}n.content&&(p?null==u||u.add(n):(p=document.createElement("div"),p.setAttribute("id",d),document.body.appendChild(p),i().render(s().createElement(m,{content:n.content,type:n.type}),p)))})(n,l.Error)}}}},48959:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(90359),s=n.n(o),r=n(22995),i=n(68214),c=n(77966),a=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(o=Object.getOwnPropertySymbols(e);s<o.length;s++)t.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(e,o[s])&&(n[o[s]]=e[o[s]])}return n};const l=i.Z.locals;function d({scope:e,root:t,slot:n,style:o={},createPortal:r,className:i,params:c,inputs:a,outputs:d,_inputs:p,_outputs:g,wrapper:v,template:y,env:h,_env:b,getComDef:I,context:x,onError:w,logger:j}){const{style:E,comAry:S}=n,_=[];if(S.forEach(((t,n)=>{var o;const{id:i,def:c,name:f}=t,m=x.getComInfo(i),{hasPermission:v}=h,E=null===(o=null==m?void 0:m.model)||void 0===o?void 0:o.permissions;if(E&&"function"==typeof v&&!v(E.id))return;if(I(c)){const o=x.get({comId:i,scope:e,_ioProxy:{inputs:a,outputs:d,_inputs:p,_outputs:g}});if(o){const c=(e?e.id:"")+n;_.push({id:i,jsx:s().createElement(u,{key:c,com:t,getComDef:I,context:x,scope:e,props:o,env:h,_env:b,template:y,onError:w,logger:j,createPortal:r}),name:f,inputs:o.inputsCallable,style:o.style})}else{const e=s().createElement("div",{className:l.error},"组件 (namespace = ",c.namespace," - id = ",i,"）未找到.");_.push({id:i,jsx:e,name:f})}}else{const e=s().createElement("div",{className:l.error},"组件 (namespace = ",c.namespace,"）未找到.");_.push({id:i,jsx:e,name:f})}})),"function"==typeof v)return v(_);{const e=null==c?void 0:c.style,n=e||E;return s().createElement("div",{"data-isslot":"1",className:`${m(n)}${t&&i?` ${i}`:""}`,style:Object.assign(Object.assign({},f(n,!!e,t)),o)},_.map((e=>e.jsx)))}}function u({com:e,props:t,scope:n,template:i,env:a,createPortal:d,_env:u,getComDef:f,context:m,onError:v,logger:y}){const{id:h,def:b,name:I,slots:x={}}=e,{data:w,title:j,style:E,inputs:S,outputs:_,_inputs:C,_outputs:k,_notifyBindings:O}=t;(0,o.useMemo)((()=>{var e;const{pxToRem:t,pxToVw:n}=a,o=function({env:e,style:t,def:n}){var o;const s=null===(o=null==e?void 0:e.themes)||void 0===o?void 0:o.comThemes;if(!s)return t.styleAry;let r;const{themesId:i}=t,{namespace:c}=n;if(i)if("_defined"===i)r=t.styleAry;else{const e=s[c];if(Array.isArray(e)){const t=e.find((({id:e})=>e===i));t&&(r=t.styleAry)}}else{const e=s[c];if(Array.isArray(e)){const t=e.find((({isDefault:e})=>e));t&&(r=t.styleAry)}}if(!r)return t.styleAry;return r}({env:a,def:b,style:E});if(Array.isArray(o)){const s=(null==a?void 0:a.shadowRoot)||(null===(e=document.getElementById("_mybricks-geo-webview_"))||void 0===e?void 0:e.shadowRoot);if(!(s||document).querySelector(`style[id="${h}"]`)){const e=document.createElement("style");let r="";e.id=h,o.forEach((({css:e,selector:o,global:s})=>{":root"===o&&(o="> *:first-child"),Array.isArray(o)?o.forEach((o=>{r+=g({id:h,css:e,selector:o,global:s,configPxToRem:t,configPxToVw:n})})):r+=g({id:h,css:e,selector:o,global:s,configPxToRem:t,configPxToVw:n})})),e.innerHTML=r,s?s.appendChild(e):document.head.appendChild(e)}}Reflect.deleteProperty(E,"styleAry"),Reflect.deleteProperty(E,"themesId")}),[]);const P=f(b),R=new Proxy(x,{get(e,t){let o;n&&(o={id:n.id+"-"+n.frameId,frameId:t,parentComId:h,parent:n});const r=m.get({comId:h,slotId:t,scope:o});return{render(e){const i=x[t];return i?s().createElement(p,{key:null==e?void 0:e.key,props:r,currentScope:o,slotId:t,slot:i,params:e,style:E,onError:v,createPortal:d,parentComId:h,logger:y,env:a,_env:u,scope:n,getComDef:f,context:m}):s().createElement("div",{className:l.error},`组件(namespace=${b.namespace}）的插槽(id=${t})`," 未找到.")},get size(){var e,n;return!!(null===(n=null===(e=x[t])||void 0===e?void 0:e.comAry)||void 0===n?void 0:n.length)},_inputs:r._inputs,inputs:r.inputs,outputs:r.outputs}}}),A=(0,o.useMemo)((()=>{if(t.frameId&&t.parentComId){let e=(null==n?void 0:n.parentScope)||n;const o=m.get({comId:t.parentComId,slotId:t.frameId,scope:(null==e?void 0:e.parent)?e:null});if(o)return{get _inputs(){return new Proxy({},{get:(e,t)=>o._inputRegs[t]})}}}}),[]),$=function({style:e,id:t}){const n=[t,l.com];1===e.flex&&n.push(l.flex);return n.join(" ")}({style:E,id:h}),T=function({style:e}){const t={},{width:n,height:o,maxWidth:s}=e;n?(0,r.hj)(n)?t.width=n+"px":n&&(t.width=n):t.width="100%";(0,r.hj)(o)?t.height=o+"px":o&&(t.height=o);s&&(t.maxWidth=s);return t}({style:E}),F=function({style:e}){const t={},{width:n,marginTop:o,marginLeft:s,marginRight:i,marginBottom:c}=e;(0,r.hj)(o)&&(t.marginTop=o+"px");(0,r.hj)(s)&&("number"==typeof n||s<0?t.marginLeft=s+"px":t.paddingLeft=s+"px");(0,r.hj)(i)&&("number"==typeof n||i<0?t.marginRight=i+"px":t.paddingRight=i+"px");(0,r.hj)(c)&&(t.marginBottom=c+"px");return t}({style:E}),M={};if(["fixed","absolute"].includes(E.position)){const{top:e,left:t,right:n,bottom:o}=E;(e||(0,r.hj)(e))&&(M.top=(0,r.hj)(e)?e+"px":e),(o||(0,r.hj)(o))&&(M.bottom=(0,r.hj)(o)?o+"px":o),(t||(0,r.hj)(t))&&(M.left=(0,r.hj)(t)?t+"px":t),(n||(0,r.hj)(n))&&(M.right=(0,r.hj)(n)?n+"px":n),"fixed"===E.position?M.zIndex=1e3:"absolute"===E.position&&(M.zIndex=1)}let Z=P.runtime({id:h,env:a,_env:u,data:w,name:I,title:j,style:E,inputs:S,outputs:_,_inputs:C,_outputs:k,_notifyBindings:O,slots:R,createPortal:d,parentSlot:A,onError:v,logger:y});return"function"==typeof i&&(Z=i({id:h,jsx:Z,name:I})),Z=Z?s().createElement("div",{id:h,key:h,style:Object.assign(Object.assign(Object.assign(Object.assign({display:E.display,position:E.position||"relative"},M),T),F),E.ext||{}),className:$},s().createElement(c.Z,{errorTip:`组件 (namespace = ${b.namespace}@${b.version}）渲染错误`},Z)):null,Z}function p({slotId:e,parentComId:t,props:n,currentScope:i,slot:c,params:a,scope:l,env:u,createPortal:p,_env:f,style:m,getComDef:g,context:v,onError:y,logger:h}){const[b,I]=(0,o.useState)(null),{curScope:x,curProps:w}=(0,o.useMemo)((()=>{let o=i,s=n,l=!1;if(o||"scope"===(null==c?void 0:c.type)&&(o={id:(0,r.Vj)(10,16),frameId:e,parentComId:t},l=!0),a){const n=a.inputValues;if("object"==typeof n){l||(o=Object.assign(Object.assign({},o),{id:o.id+"-"+(0,r.Vj)(10,16),parentScope:o})),s=v.get({comId:t,slotId:e,scope:o});for(let e in n)s.inputs[e](n[e],o)}}return s.run(o),{curScope:o,curProps:s}}),[]);(0,o.useEffect)((()=>{const e=null==a?void 0:a.inputValues;if(e)if(b){if("object"==typeof e&&JSON.stringify(b)!==JSON.stringify(e)){for(let t in e)w.inputs[t](e[t],x);w.run()}}else I(e)}),[null==a?void 0:a.inputValues]),(0,o.useEffect)((()=>()=>{w.destroy()}),[]);return(0,o.useMemo)((()=>s().createElement(d,{scope:x,env:u,createPortal:p,_env:f,slot:c,params:a,wrapper:null==a?void 0:a.wrap,template:null==a?void 0:a.itemWrap,getComDef:g,context:v,inputs:null==a?void 0:a.inputs,outputs:null==a?void 0:a.outputs,_inputs:null==a?void 0:a._inputs,_outputs:null==a?void 0:a._outputs,onError:y,logger:h})),[])}function f(e,t,n){const{paddingLeft:o,paddingTop:s,paddingRight:r,paddingBottom:i,background:c,backgroundColor:l,backgroundImage:d,backgroundPosition:u,backgroundRepeat:p,backgroundSize:f}=e,m=a(e,["paddingLeft","paddingTop","paddingRight","paddingBottom","background","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize"]);let g={paddingLeft:o||0,paddingTop:s||0,paddingRight:r||0,paddingBottom:i||0,backgroundColor:l||(n?"#ffffff":void 0),backgroundImage:d,backgroundPosition:u,backgroundRepeat:p,backgroundSize:f};if(c){if("object"==typeof c){const{background:e,backgroundImage:t,backgroundColor:n,backgroundRepeat:o,backgroundSize:s}=c;g.backgroundRepeat=o,g.backgroundSize=s,e?g.background=e:(g.backgroundImage=t,g.backgroundColor=n)}else g.background=c}return t&&(g=Object.assign(g,m)),g}function m(e){var t,n;const o=[l.slot,"slot"],s=e;if(s){"flex-column"==(null===(t=s.layout)||void 0===t?void 0:t.toLowerCase())?o.push(l.lyFlexColumn):"flex-row"==(null===(n=s.layout)||void 0===n?void 0:n.toLowerCase())&&o.push(l.lyFlexRow);const e=s.justifyContent;e&&("FLEX-START"===e.toUpperCase()?o.push(l.justifyContentFlexStart):"CENTER"===e.toUpperCase()?o.push(l.justifyContentFlexCenter):"FLEX-END"===e.toUpperCase()?o.push(l.justifyContentFlexFlexEnd):"SPACE-AROUND"===e.toUpperCase()?o.push(l.justifyContentFlexSpaceAround):"SPACE-BETWEEN"===e.toUpperCase()&&o.push(l.justifyContentFlexSpaceBetween));const r=s.alignItems;r&&("FLEX-START"===r.toUpperCase()?o.push(l.alignItemsFlexStart):"CENTER"===r.toUpperCase()?o.push(l.alignItemsFlexCenter):"FLEX-END"===r.toUpperCase()&&o.push(l.alignItemsFlexFlexEnd))}return o.join(" ")}function g({id:e,css:t,selector:n,global:o,configPxToRem:s,configPxToVw:i}){return`\n    ${o?"":`#${e} `}${n.replace(/\{id\}/g,`${e}`)} {\n      ${Object.keys(t).map((e=>{let n=t[e];return s&&"string"==typeof n&&-1!==n.indexOf("px")?n=(0,r.Q1)(n):i&&"string"==typeof n&&-1!==n.indexOf("px")&&(n=(0,r.Ok)(n)),`${(0,r.Lc)(e)}: ${n};`})).join("\n")}\n    }\n  `}},50828:(e,t,n)=>{n.r(t),n.d(t,{render:()=>I});var o=n(90359),s=n.n(o),r=n(73934),i=n(1264),c=n(69332),a=n(98520),l=n(44242),d=n(22995),u=n(68214),p=n(53515),f=n(96868),m=n(47309),g=n(38148),v=n(33970),y=n(5415),h=n(53002);console.log(`%c ${i.u2} %c@${i.i8}`,"color:#FFF;background:#fa6400","","");class b{constructor(e){this._refsMap={};const{env:t,debug:n,observable:o}=e;if(o||(0,l.O)({pxToRem:t.pxToRem,pxToVw:t.pxToVw}),this.opts=e,"function"==typeof n){const o=new a.x({env:t}),{log:s,onResume:r}=n({resume:()=>{o.next()},ignoreAll:e=>{o.setIgnoreWait(e),e&&o.next(!0)}});o.setResume(r),this.debuggerPanel=o,e.debugLogger=s}this.initOther(),this.initCss(),this.initComdefs()}initOther(){const{env:e,debug:t,onError:n}=this.opts;e.silent&&(0,v.JE)(),y.Z.init(e.showErrorNotification),this.onError=t&&"function"==typeof n?n:e=>{console.error(e),y.Z.error(e)},this.logger=Object.assign(Object.assign({},console),{error:e=>{console.error(e),y.Z.error(e)}})}initCss(){const e=this.opts.env.shadowRoot;(0,d.nZ)(u.Z,e),(0,d.nZ)(p.Z,e),(0,d.nZ)(f.Z,e),(0,d.nZ)(m.Z,e),"function"==typeof this.opts.debug&&(0,d.nZ)(g.Z,e)}initComdefs(){const e=(t,n)=>{t.forEach((t=>{t.comAray?e(t.comAray,n):n[`${t.namespace}-${t.version}`]=t}))};let t=null;const{comDefs:n}=this.opts;n&&(t={},Object.assign(t,n));let o=[...window.__comlibs_edit_||[],...window.__comlibs_rt_||[]];if(!t){if(!o.length)throw new Error('组件库为空，请检查是否通过<script src="组件库地址"><\/script>加载或通过comDefs传入了组件库运行时.');t={}}o.push(h.Z),o.forEach((n=>{const o=n.comAray;o&&Array.isArray(o)&&e(o,t)})),this.comDefs=t}getComDef(e){const{comDefs:t}=this,n=t[e.namespace+"-"+e.version];if(!n){const n=[];for(let o in t)o.startsWith(e.namespace+"-")&&n.push(t[o]);if(n&&n.length>0){n.sort(((e,t)=>(0,d.yC)(e.version,t.version)));const t=n[0];return console.warn(`【Mybricks】组件${e.namespace+"@"+e.version}未找到，使用${t.namespace}@${t.version}代替.`),t}return console.log(t),null}return n}setRefs(e,t){this._refsMap[e]=t}getRefsMap(){return this._refsMap}}function I(e,t={}){return e?(t.env._context||(t.env._context=new b(t)),Array.isArray(e.scenes)?(function(e){const{global:t,modules:n,scenes:o}=e;if(t){const{comsReg:e,consReg:s,pinRels:r,fxFrames:i}=t;e&&Object.keys(e).forEach((t=>{e[t].global=!0})),Array.isArray(i)&&i.forEach((t=>{e&&Object.assign(t.coms,e),s&&Object.assign(t.cons,s),r&&Object.assign(t.pinRels,r)})),n&&Object.entries(n).forEach((([t,n])=>{const{json:o}=n;e&&Object.assign(o.coms,e),s&&Object.assign(o.cons,s),r&&Object.assign(o.pinRels,r)})),o.forEach((t=>{e&&Object.assign(t.coms,e),s&&Object.assign(t.cons,s),r&&Object.assign(t.pinRels,r)}))}}(e),s().createElement(c.Z,{json:e,opts:t})):s().createElement(r.Z,{json:e,opts:t,root:"module"!==e.type})):null}},21358:(e,t,n)=>{n.d(t,{ep:()=>o.e,in:()=>i,kU:()=>r,st:()=>s.s});var o=n(30627),s=n(42032);const r=new WeakMap,i=new WeakMap},42032:(e,t,n)=>{n.d(t,{s:()=>s});var o=n(21358);const s=new class{constructor(){this.reactionStack=[]}regist(e){let t=this.getCurrentReaction();t&&o.ep.registReaction(t,e)}autoRun(e,t){const{reactionStack:n}=this;if(-1===n.indexOf(e))try{return n.push(e),t()}finally{n.pop()}}getCurrentReaction(){const{reactionStack:e}=this;return e[e.length-1]}}},30627:(e,t,n)=>{n.d(t,{e:()=>i});var o=n(22995),s=n(21358);function r(e){e()}const i=new class{constructor(){this.taskMap=new WeakMap,this.reactionToTaskMap=new WeakMap}addTask(e){this.taskMap.set(e,new Map)}deleteTask(e){if(!(0,o.Kn)(e))return;const t=s.kU.get(e);s.kU.delete(e),s.in.delete(t);this.taskMap.get(t);this.taskMap.delete(t)}deleteReaction(e){let t=this.reactionToTaskMap.get(e);t&&(this.reactionToTaskMap.delete(e),t.forEach((t=>{t.forEach((t=>{t.delete(e)}))})))}registReaction(e,{target:t,key:n}){const o=this.taskMap.get(t);if(o){let t=o.get(n);t||(t=new Set,o.set(n,t)),t.has(e)||t.add(e);let s=this.reactionToTaskMap.get(e);s||(s=new Set,this.reactionToTaskMap.set(e,s)),s.has(o)||s.add(o)}}getReactions({target:e,key:t}){const n=this.taskMap.get(e);if(!n)return[];return n.get(t)||[]}runTask(e){const t=this.getReactions(e);t.size&&t.forEach(r)}}},26234:(e,t,n)=>{n.d(t,{Z:()=>i});var o=n(44242),s=n(22995),r=n(21358);const i={get:function(e,t){const n=e[t];if(["$$typeof","constructor"].includes(t)||e.__model_style__&&"display"!==t)return n;if(r.st.regist({target:e,key:t}),n instanceof FormData)return n;const i=r.in.get(n);return(0,s.Kn)(n)?i||(0,o.L)(n):i||n},set:function(e,t,n){(0,s.Kn)(n)&&(n=r.kU.get(n)||n);const o=Object.hasOwnProperty.call(e,t),i=e[t];e[t]=n;let c=!1;switch(!0){case!o||Array.isArray(e)&&"length"===t:case n!==i:c=!0}return c&&(r.ep.runTask({target:e,key:t}),r.ep.deleteTask(r.in.get(i))),!0}}},44242:(e,t,n)=>{n.d(t,{L:()=>m,O:()=>d});var o=n(90359),s=n.n(o),r=n(21358),i=n(22995),c=n(26234);const a="__render-web-createElement__";let l;function d(e){const{pxToRem:t,pxToVw:n}=e;s()[a]||(s()[a]=!0,l=s().createElement,s().createElement=function(...e){let[o,r]=e;if(r){const c=r.style;if(t&&c?Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,i.Q1)(t))})):n&&c&&Object.keys(c).forEach((e=>{const t=c[e];"string"==typeof t&&-1!==t.indexOf("px")&&(c[e]=(0,i.Ok)(t))})),e.length>0&&"function"==typeof o){if(!o.prototype||!(o.prototype instanceof s().Component)&&void 0===o.prototype.isReactComponent){const t=p(o);e.splice(0,1,t)}return l(...e)}if("object"==typeof o&&o.$$typeof===Symbol.for("react.forward_ref")){const t=p(o,!0);return e.splice(0,1,t),l(...e)}return l(...e)}return l(...e)})}const u="__enhanced__";function p(e,t=!1){let n=e[u];if(!n){t?(n=(0,o.memo)(e),n.render=f(e.render,!1)):n=f(e);try{e[u]=n}catch(e){}}const s=Object.getOwnPropertyNames(e);return s&&s.forEach((o=>{try{t&&"render"===o||(n[o]=e[o])}catch(e){console.error(e)}})),n}function f(e,t=!0){function n(t,n){var s;const r=(0,o.useRef)(null),[,i]=(0,o.useState)([]),c=(0,o.useCallback)((()=>{i([])}),[]);let a;return(0,o.useMemo)((()=>{r.current||(r.current=new g(c))}),[]),(0,o.useEffect)((()=>()=>{var e;null===(e=r.current)||void 0===e||e.destroy(),r.current=null}),[]),null===(s=r.current)||void 0===s||s.track((()=>{a=e(t,n)})),a}return n.displayName=e.displayName||e.name,t?(0,o.memo)(n):n}function m(e){return(0,i.Kn)(e)?r.kU.has(e)?e:r.in.get(e)||function(e){const t=c.Z,n=new Proxy(e,t);return r.in.set(e,n),r.kU.set(n,e),r.ep.addTask(e),n}(e):{}}class g{constructor(e){this.update=e}track(e){r.st.autoRun(this.update,e)}destroy(){r.ep.deleteReaction(this.update)}}},1264:e=>{e.exports=JSON.parse('{"u2":"@mybricks/render-web","i8":"1.2.28"}')}}]);