"use strict";(self.webpackChunkmybricks=self.webpackChunkmybricks||[]).push([[559],{87159:(e,t,n)=>{n.d(t,{z:()=>d});var r=n(64012),l=n(64012);const o=Symbol.for("react.memo"),s=Symbol.for("react.forward_ref"),a=Symbol.for("react.fragment"),c=Symbol.for("react.provider"),i=Symbol.for("react.context"),u=(0,r.createContext)({});function d({children:e}){return l.createElement(m,null,e)}const m=(0,r.forwardRef)((function({_editors_:e,children:t},n){if(!t)return;if(Array.isArray(t))return t.map(((e,t)=>l.createElement(m,{key:t},e)));if((0,r.isValidElement)(t)){const{type:e,props:n}=t,d=(0,r.useContext)(u);let _=(null==n?void 0:n._key)||d._parentKey;const g=t.key;let v=d._key;if(v=g?_?_+"_"+g:g:(null==n?void 0:n._key)||d._key||_,e.$$typeof===o)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(b,null,t)):l.createElement(b,null,t);if(e.$$typeof===s)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(E,null,t)):l.createElement(E,null,t);if(e.$$typeof===c){const e=n.children;if(e)return(0,r.cloneElement)(t,Object.assign(Object.assign({},n),{"data-selector-key":v,children:l.createElement(m,null,e)}))}else{if(e.$$typeof===i){const e=n.children;return e?(0,r.cloneElement)(t,Object.assign(Object.assign({},n),{"data-selector-key":v,children:(...t)=>l.createElement(m,null,e(...t))})):t}if(e===a)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(y,null,t)):l.createElement(y,null,t);if(e===c)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(h,null,t)):l.createElement(h,null,t);if("function"==typeof e)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(f,null,t)):l.createElement(f,null,t);if("string"==typeof e)return v?l.createElement(u.Provider,{value:{_key:v,_parentKey:_}},l.createElement(p,null,t)):l.createElement(p,null,t);{const e=n.children;if(e)return(0,r.cloneElement)(t,Object.assign(Object.assign({},n),{"data-selector-key":v,children:l.createElement(m,null,e)}))}}}return t}));function p({children:e}){const t=(0,r.useContext)(u),{_key:n}=t,{props:o}=e,s=o.children,a={};return s?(0,r.cloneElement)(e,Object.assign(Object.assign(Object.assign({},a),o),{children:l.createElement(m,null,s),_key:n})):(0,r.cloneElement)(e,Object.assign(Object.assign({},o),{_key:n}))}function f({children:e}){const{type:t,props:n}=e;if(t.prototype instanceof l.Component)return l.createElement(h,null,e);const r=t(n);return l.createElement(m,null,r)}function y({children:e}){const{props:t}=e,n=t.children;return n?l.createElement(m,null,n):e}function h({children:e}){const{props:t}=e,n=t.children;return n?"function"==typeof n?(0,r.cloneElement)(e,Object.assign(Object.assign({},t),{children:(...e)=>l.createElement(m,null,n(...e))})):(0,r.cloneElement)(e,Object.assign(Object.assign({},t),{children:l.createElement(m,null,n)})):e}function E({children:e}){const{type:t,props:n,ref:r}=e,o=t.render(n,r);return l.createElement(m,null,o)}function b({children:e}){const{type:t,props:n}=e;if("function"==typeof t.type){const e=t.type(n);return l.createElement(m,null,e)}if(t.type.$$typeof===s){const e=t.type.render(n,n.ref);return l.createElement(m,null,e)}}},80437:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(64012),l=n.n(r);Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler");const o=Symbol.for("react.provider"),s=(Symbol.for("react.context"),Symbol.for("react.forward_ref")),a=(Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo")),c=(Symbol.for("react.lazy"),Symbol.for("react.offscreen"),"data-com-id"),i=(0,r.createContext)({_key:null,_data:null}),u=i.Provider,d=({children:e})=>{if((0,r.isValidElement)(e)){const{type:t}=e;switch(Object.prototype.toString.call(t)){case"[object String]":return l().createElement(y,null,e);case"[object Object]":return l().createElement(h,null,e);case"[object Function]":return l().createElement(g,null,e);case"[object Symbol]":return l().createElement(v,null,e);default:return e}}return e},m=({_data:e,children:t})=>{if(e)return l().createElement(u,{value:{_data:e}},l().createElement(m,null,t));const{_key:n,_data:o}=(0,r.useContext)(i);if(!o)return t;if(Array.isArray(t))return r.Children.map(t,(e=>l().createElement(m,null,e)));if((0,r.isValidElement)(t)){const{props:e}=t,s=e[c];return s?s!==n?l().createElement(u,{value:{_key:s,_data:o}},l().createElement(d,null,t)):l().createElement(d,null,(0,r.cloneElement)(t,{[c]:null})):l().createElement(d,null,t)}return t},p=m,f=({type:e,render:t,next:n})=>{if(!e.__airender__)if(e.__ori__){n(e.__ori__),e.__airender__=!0}else{const r=t;n(r),e.__airender__=!0,e.__ori__=r}},y=({children:e})=>{const{_key:t,_data:n}=(0,r.useContext)(i),{props:o}=e,{children:s}=o;return t?(0,r.cloneElement)(e,{[c]:t,children:s?l().createElement(u,{value:{_key:null,_data:n}},l().createElement(m,null,s)):null}):(0,r.cloneElement)(e,{children:s?l().createElement(m,null,s):null})},h=({children:e})=>{const{type:t}=e;switch(t.$$typeof){case s:return l().createElement(E,null,e);case o:return l().createElement(b,null,e);case a:return l().createElement(_,null,e);default:return e}},E=({children:e})=>{const{props:t,ref:n,type:o}=e,s=t.children;if(s&&"function"==typeof s){const t=s;return(0,r.cloneElement)(e,{children:(...e)=>l().createElement(m,null,t(...e))})}return o.__airender__||f({type:o,render:o.render,next:e=>{o.render=(...t)=>{const n=e(...t);return l().createElement(m,null,n)}}}),e},b=({children:e})=>{const{props:t}=e,{children:n}=t;return n?(0,r.cloneElement)(e,{children:l().createElement(m,null,n)}):e},_=({children:e})=>{const{type:t,props:n}=e;if("function"==typeof t.type){const e=t.type(n);return l().createElement(m,null,e)}if(t.type.$$typeof===s){const r=t.type.render(n,e.ref);return l().createElement(m,null,r)}return e},g=({children:e})=>{const{type:t,props:n}=e;return t.prototype instanceof r.Component?(t.__airender__||f({type:t,render:t.prototype.render,next:e=>{t.prototype.render=function(){const t=e.call(this);return l().createElement(m,null,t)}}}),e):l().createElement(m,null,t(n))},v=({children:e})=>{const{props:t}=e,{children:n}=t;return n?(0,r.cloneElement)(e,{children:l().createElement(m,null,n)}):e}},90559:(e,t,n)=>{n.r(t),n.d(t,{EnhanceRender:()=>l.z,EnhanceRender2:()=>o.A,convertCamelToHyphen:()=>s.RD,convertHyphenToCamel:()=>s.xu,parseLess:()=>r.Pr,parseMBX:()=>a.b,replaceNonAlphaNumeric:()=>s.H9,stringifyLess:()=>r.hN,transformRender:()=>r.lt});var r=n(28620),l=n(87159),o=n(80437),s=n(65190),a=n(8771)},8771:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(24249),l=n(39536),o=n(30075),s=function(e,t,n,r){return new(n||(n=Promise))((function(l,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?l(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))};function a(e){return s(this,void 0,void 0,(function*(){const t=r.parse(e.replace(/<!--((?!-->)[\s\S])*-->/g,""),{sourceType:"module",plugins:["jsx"]});let n,o;const s=new Map,a=new Map;return(0,l.default)(t,{enter(e){if(e.isJSXElement()){const t=c(e.node.openingElement.name);if(!t)return;const r=u(e.node.openingElement.attributes),l=d();if("page"===t){const t={id:l,title:r.title,style:r.layout,showType:r.showType,comAry:[]};n=t,o={id:l,title:r.title,type:"scene",inputs:[{id:"open",hostId:"open",title:"打开",type:"normal",schema:{type:"any"}}],diagrams:[]},s.set(e.node,t)}else if("flex"===t){const t={id:l,namespace:"flex",title:r.title,style:Object.assign(Object.assign({},r.layout),{styleAry:r.styleAry,flexDirection:r.row?"row":(r.column,"column")}),comAry:[]};s.get(e.parent).comAry.push(t),s.set(e.node,t)}else if(t.startsWith("slots")){const[n,l]=t.split("."),o=s.get(e.parent);if(o.slots||(o.slots={}),!o.slots[l]){const t={id:l,style:r.layout,title:r.title,type:r.type,comAry:[]};o.slots[l]=t,s.set(e.node,t)}}else{const n=s.get(e.parent),o={id:l,name:d(),data:r.data,namespace:t,title:r.title,style:Object.assign(Object.assign({},r.layout),{styleAry:r.styleAry}),themesId:"_defined",outputs:[],inputs:[]};r.ref&&a.set(r.ref,o),n.comAry,n.comAry.push(o),s.set(e.node,o)}}}}),(0,l.default)(t,{enter(e){var t;if(e.isJSXElement()){const n=o.diagrams;function r(t){return"this"===t?s.get(e.node):a.has(t)?a.get(t):{id:d()}}const l=u(e.node.openingElement.attributes);if(Array.isArray(l.outputs)){const c=l.outputs;if(!Array.isArray(c))return;const i=r("this"),m={id:d(),type:"event",from:{com:{id:i.id,title:i.title}},comAry:[],connections:[]},p={},f=new Set;(null!==(t=c[0])&&void 0!==t?t:[]).forEach((e=>{const{from:t,to:n}=null!=e?e:{},[l,o]=null!=t?t:[],[s,a]=null!=n?n:[],c=r(l),i=r(s);c&&i?(p[`${c.id}@${o}`]||(p[`${c.id}@${o}`]=d()),p[`${i.id}@${a}`]||(p[`${i.id}@${a}`]=d()),f.add(c),f.add(i),m.connections.push({from:{com:{id:c.id,title:c.title},pin:{id:p[`${c.id}@${o}`],hostId:o,position:{}}},to:{com:{id:i.id,title:i.title},pin:{id:p[`${i.id}@${a}`],hostId:a,position:{}}}}),"this"===l&&(m.from.com.pinId=o),c.outputs.some((e=>e.hostId===o))||c.outputs.push({id:p[`${c.id}@${o}`],hostId:o}),i.inputs.some((e=>e.id===a))||i.inputs.push({id:a})):console.warn("逻辑组件连线有缺失")})),m.comAry=Array.from(f),n.push(m)}}}}),{ui:n,interaction:o}}))}const c=e=>{if(o.isJSXIdentifier(e))return e.name;if(o.isJSXMemberExpression(e)){let t="";for(;o.isJSXMemberExpression(e);)t=`.${e.property.name}${t}`,e=e.object;return`${e.name}${t}`}},i=e=>{if(null===e)return!0;if(o.isStringLiteral(e))return e.value;if(o.isNumericLiteral(e))return e.value;if(o.isBooleanLiteral(e))return e.value;if(o.isJSXExpressionContainer(e))return i(e.expression);if(o.isObjectExpression(e)){const t={};return e.properties.forEach((e=>{const n=o.isIdentifier(e.key)?e.key.name:e.key.value;t[n]=i(e.value)})),t}return o.isArrayExpression(e)?e.elements.map((e=>i(e))):e},u=e=>{const t={};return e.forEach((e=>{const n=e.name.name,r=i(e.value);t[n]=r})),t};function d(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="u_";for(let n=0;n<5;n++)t+=e.charAt(Math.floor(62*Math.random()));return t}},28620:(e,t,n)=>{n.d(t,{Pr:()=>a.P,hN:()=>a.h,lt:()=>i});var r=n(24249),l=n(30075),o=n(39536),s=n(47327),a=(n(42101),n(34827));const c="data-com-id";function i(e,t){const n=r.parse(e,{sourceType:"module",plugins:["jsx"]}),a=(e,t="")=>l.isJSXIdentifier(e)?{tagName:e.name,fullName:e.name+t}:l.isJSXMemberExpression(e)?a(e.object,"."+e.property.name+t):{tagName:"",fullName:t};let i,u,d=!1;const m=new Set,p=new Map,f=(e,t)=>{l.isObjectPattern(e)&&e.properties.forEach((e=>{l.isObjectProperty(e)&&l.isIdentifier(e.key)&&(p.set(e.key.name,t),l.isObjectPattern(e.value)&&f(e.value,t))}))};(0,o.default)(n,{VariableDeclarator(e){const{id:t,init:n}=e.node;l.isIdentifier(n)&&p.has(n.name)&&f(t,n.name)},ImportDeclaration(e){var t;(t=e.node).specifiers.forEach((e=>{l.isImportSpecifier(e)&&(p.set(e.local.name,t.source.value),m.add(t.source.value))}))},JSXElement(e){d||l.isJSXIdentifier(e.node.openingElement.name)&&(m.has(e.node.openingElement.name.name)?(i=e.node.openingElement.name,d=!0):(u||(u=e.node.openingElement.name),e.node.children.filter((e=>l.isJSXElement(e))).length>1&&(d=!0)))},JSXOpeningElement(e){const{tagName:n,fullName:r}=a(e.node.name),o=((e,t)=>{const n=e.split(".");let r=t.get(n[0]);for(;r;)n.unshift(r),r=t.get(r);return n})(r,p);if(n){const r=m.has(o[0]),s=e.node.attributes.filter((e=>l.isJSXAttribute(e))).reduce(((e,t)=>(e.set(t.name.name,t),e)),new Map);let a="normal";r?a=i===e.node.name?"comRoot":"com":u===e.node.name&&(a="normalRoot");const d=t({tagName:n,attributeNames:new Set(s.keys()),type:a,libName:r?o[0]:null,comName:r?o.slice(1).join("."):null});d&&Object.entries(d).forEach((([t,n])=>{s.has(t)||(t===c?e.node.attributes.push(l.jsxAttribute(l.jsxIdentifier(t),s.has("key")?l.jsxExpressionContainer(l.binaryExpression("+",l.stringLiteral(n),s.get("key").value.expression)):l.stringLiteral(n))):e.node.attributes.push(l.jsxAttribute(l.jsxIdentifier(t),l.stringLiteral(n))))}))}}});return(0,s.default)(n).code}},34827:(e,t,n)=>{n.d(t,{P:()=>c,h:()=>d});var r=n(42101),l=n.n(r),o=n(65190);const s=e=>e.reduce(((e,t)=>("&"===t.key?Object.entries(t.value).forEach((([t,n])=>{e[t]=n})):e[t.key]=t.value,e)),{});class a{constructor(e){this._ruleSet=e,this.cssObj={};this.handleRuleSet(this._ruleSet).forEach((({key:e,value:t})=>{this.cssObj[e]=t}))}get(){return this.cssObj}handleRules(e){const t={},n=[];return e.forEach((e=>{if("Ruleset"===e.type){const t=this.handleRuleSet(e);n.push(...t)}else if("Declaration"===e.type){const n=this.handleDeclaration(e);t[n.key]=n.value}else if("Media"===e.type){const t=this.handleMedia(e);n.push(t)}else if("AtRule"===e.type){const t=this.handleAtRule(e);n.push(t)}else console.log("其它 => ",e.type)})),{cssObj:t,cssObjs:n}}handleRuleSet(e){const t=e.root?"":(e=>{let t=(null==e?void 0:e.reduce(((e,t,n)=>e+(n?",":"")+t.toCSS()),""))||"";return t.slice(1,t.length).trim()})(e.selectors),n=[],{cssObj:r,cssObjs:l}=this.handleRules(e.rules);return t&&n.push({key:t,value:r}),n.concat(...l)}handleDeclaration(e){let t="";t="string"==typeof e.name?e.name:e.name[0].toCSS();const n=e.value.toCSS();return{key:(0,o.xu)(t),value:n}}handleMedia(e){const t=e.features.value.reduce(((e,t)=>(t.value.forEach((t=>{if("Paren"===t.type){const n=this.handleDeclaration(t.value);e+=` (${(0,o.RD)(n.key)}: ${n.value})`}else e+=` ${t.toCSS()}`})),e)),"@media"),{cssObjs:n}=this.handleRules(e.rules);return{key:t,value:s(n)}}handleAtRule(e){const t=e.name,n=e.value.toCSS(),{cssObjs:r}=this.handleRules(e.rules);return{key:`${t} ${n}`,value:s(r)}}}const c=e=>{let t={};try{l().render(e,((e,n)=>{e?console.error(e):l().parse(n.css.replace(/\/\*[\s\S]*?\*\//g,""),((e,n)=>{if(e)console.error(e);else{const e=new a(n);t=e.get()}}))}))}catch(e){console.error(e)}return t},i=(e,t="")=>{let n="";const r=Object.entries(e),l=r.length-1;return r.forEach((([e,r],s)=>{n+="object"==typeof r?`${s?t?"\n":"\n\n":""}${t}${e} {\n${i(r,t+"  ")}\n${t}}`:`${t}${(0,o.RD)(e)}: ${r};${s===l?"":"\n"}`})),n},u=(e,{keys:t,value:n})=>{const r=t.length;t.forEach(((t,l)=>{e[t]?l===r-1?e[t]=Object.assign(e[t],n):e=e[t]:l===r-1?e[t]=n:(e[t]={},e=e[t])}))},d=e=>i((e=>{const t={};return Object.entries(e).forEach((([e,n])=>{const r=e.split(" ");if(1===r.length)t[e]=n;else{const l=t[r[0]];l?u(l,{keys:r.slice(1),value:n}):t[e]=n}})),t})(e))},65190:(e,t,n)=>{n.d(t,{H9:()=>r,RD:()=>l,xu:()=>o});const r=(e,t="_")=>e.replace(/[^0-9a-zA-Z]/g,t),l=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),o=e=>e.replace(/-(\w)/g,((e,t)=>t.toUpperCase()))}}]);